<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Yade-commits] r1281 - in trunk: . extra gui gui/qt3	pkg/common/Engine/DeusExMachina	pkg/dem/Engine/StandAloneEngine scripts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/yade-commits/2008/index.html" >
   <LINK REL="made" HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1281%20-%20in%20trunk%3A%20.%20extra%20gui%20gui/qt3%0A%09pkg/common/Engine/DeusExMachina%0A%09pkg/dem/Engine/StandAloneEngine%20scripts&In-Reply-To=%3C200803181017.m2IAHwik009949%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000245.html">
   <LINK REL="Next"  HREF="000247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Yade-commits] r1281 - in trunk: . extra gui gui/qt3	pkg/common/Engine/DeusExMachina	pkg/dem/Engine/StandAloneEngine scripts</H1>
    <B>eudoxos at BerliOS</B> 
    <A HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1281%20-%20in%20trunk%3A%20.%20extra%20gui%20gui/qt3%0A%09pkg/common/Engine/DeusExMachina%0A%09pkg/dem/Engine/StandAloneEngine%20scripts&In-Reply-To=%3C200803181017.m2IAHwik009949%40sheep.berlios.de%3E"
       TITLE="[Yade-commits] r1281 - in trunk: . extra gui gui/qt3	pkg/common/Engine/DeusExMachina	pkg/dem/Engine/StandAloneEngine scripts">eudoxos at mail.berlios.de
       </A><BR>
    <I>Tue Mar 18 11:17:58 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000245.html">[Yade-commits] r1280 - in trunk: lib/serialization pkg/common	pkg/common/Engine/DeusExMachina pkg/common/Engine/MetaEngine	pkg/common/RenderingEngine/GLDrawGeometricalModel	pkg/common/RenderingEngine/OpenGLRenderingEngine pkg/dem	pkg/dem/DataClass/InteractionPhysics	pkg/dem/Engine/EngineUnit pkg/dem/Engine/StandAloneEngine	pkg/dem/PreProcessor pkg/dem/RenderingEngine	pkg/dem/RenderingEngine/GLDrawCohesiveFrictionalContactInteraction	pkg/dem/RenderingEngine/GLDrawElasticContactInteraction	pkg/lattice/Engine/StandAloneEngine pkg/lattice/PreProcessor
</A></li>
        <LI>Next message: <A HREF="000247.html">[Yade-commits] r1282 - trunk/extra
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: eudoxos
Date: 2008-03-18 11:17:56 +0100 (Tue, 18 Mar 2008)
New Revision: 1281

Added:
   trunk/gui/qt3/GLSimulationPlayerViewer.cpp
   trunk/gui/qt3/GLSimulationPlayerViewer.hpp
   trunk/gui/qt3/QtGeneratedSimulationPlayer.ui
   trunk/gui/qt3/QtSimulationPlayer.cpp
   trunk/gui/qt3/QtSimulationPlayer.hpp
Modified:
   trunk/SConstruct
   trunk/extra/Brefcom.cpp
   trunk/gui/SConscript
   trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.cpp
   trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.hpp
   trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.cpp
   trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.hpp
   trunk/scripts/default-test.py
Log:
1. Resurredced and un-crapped simulation player (for making videos). Updated howto is <A HREF="http://yade.wikia.com/wiki/New:Making_videos#Using_Simulation_Player_with_svn.3E1281">http://yade.wikia.com/wiki/New:Making_videos#Using_Simulation_Player_with_svn.3E1281</A>

2. Added some comments to didactical CentralGravityEngine and to PositionOrientationRecorder.

3. Some other details.



Modified: trunk/SConstruct
===================================================================
--- trunk/SConstruct	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/SConstruct	2008-03-18 10:17:56 UTC (rev 1281)
@@ -154,7 +154,7 @@
 ############# SHORTCUT&#160;TARGETS ###########################################################
 ##########################################################################################
 
-if len(sys.argv)&gt;1:
+if len(sys.argv)&gt;1 and ('clean' in sys.argv) or ('tags' in sys.argv) or ('doc' in sys.argv):
 	if 'clean' in sys.argv:
 		if os.path.exists(buildDir):
 			print &quot;Cleaning: %s.&quot;%buildDir; shutil.rmtree(buildDir)

Modified: trunk/extra/Brefcom.cpp
===================================================================
--- trunk/extra/Brefcom.cpp	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/extra/Brefcom.cpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -231,7 +231,7 @@
 	glTranslatev(mid);
 	glPushMatrix();
 		glRasterPos2i(0,0);
-		ostringstream oss; oss&lt;&lt;setw(3)&lt;&lt; /* &quot;w=&quot;&lt;&lt; */ (float)BC-&gt;omega;
+		ostringstream oss; oss&lt;&lt;setprecision(3)&lt;&lt; /* &quot;w=&quot;&lt;&lt; */ (float)BC-&gt;omega;
 		//std::string str=std::string(&quot;omegaPl=&quot;)+boost::lexical_cast&lt;std::string&gt;((float)(BC-&gt;omegaPl));
 		for(unsigned int i=0;i&lt;oss.str().length();i++) glutBitmapCharacter(GLUT_BITMAP_HELVETICA_12,oss.str()[i]);
 	glPopMatrix();

Modified: trunk/gui/SConscript
===================================================================
--- trunk/gui/SConscript	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/gui/SConscript	2008-03-18 10:17:56 UTC (rev 1281)
@@ -15,7 +15,12 @@
 				'qt3/SimulationController.cpp',
 				'qt3/SimulationControllerUpdater.cpp',
 				'qt3/YadeQtGeneratedMainWindow.ui',
-				'qt3/YadeQtMainWindow.cpp'],
+				'qt3/YadeQtMainWindow.cpp',
+
+				'qt3/GLSimulationPlayerViewer.cpp',
+				'qt3/QtGeneratedSimulationPlayer.ui',
+				'qt3/QtSimulationPlayer.cpp',
+				],
 			LIBS=env['LIBS']+['yade-base',
 				'yade-multimethods',
 				'yade-factory',
@@ -24,6 +29,7 @@
 				'yade-computational-geometry',
 				'XMLFormatManager',
 				'yade-serialization-qt',
+				'PositionOrientationRecorder',
 				'$QGLVIEWER_LIB'],
 			CPPPATH=env['CPPPATH']+['qt3']),
 	])

Copied: trunk/gui/qt3/GLSimulationPlayerViewer.cpp (from rev 1273, trunk/gui/qt3/GLSimulationPlayerViewer.cpp)
===================================================================
--- trunk/gui/qt3/GLSimulationPlayerViewer.cpp	2008-03-03 15:51:38 UTC (rev 1273)
+++ trunk/gui/qt3/GLSimulationPlayerViewer.cpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -0,0 +1,162 @@
+/*************************************************************************
+*  Copyright (C) 2004 by Olivier Galizzi                                 *
+*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">olivier.galizzi at imag.fr</A>                                               *
+*                                                                        *
+*  This program is free software; it is licensed under the terms of the  *
+*  GNU General Public License v2 or later. See file LICENSE for details. *
+*************************************************************************/
+
+#include &quot;GLSimulationPlayerViewer.hpp&quot;
+#include &lt;stdlib.h&gt;
+#include &lt;fstream&gt;
+#include &lt;string&gt;
+#include &lt;boost/lexical_cast.hpp&gt;
+#include &lt;boost/filesystem/operations.hpp&gt;
+#include &lt;boost/filesystem/convenience.hpp&gt;
+
+#undef DEBUG /* I HATE&#160;qt3 for this! ::log4cxx::Level::DEBUG becomes ::log4cxx::Level:: becomes syntax error */
+#include&lt;yade/pkg-dem/PositionOrientationRecorder.hpp&gt;
+
+
+
+
+using namespace std;
+using namespace boost;
+
+CREATE_LOGGER(GLSimulationPlayerViewer);
+
+
+GLSimulationPlayerViewer::GLSimulationPlayerViewer(QWidget * parent,char* name) : QGLViewer(parent,name)
+{
+	shared_ptr&lt;Factorable&gt; tmpRenderer = ClassFactory::instance().createShared(&quot;OpenGLRenderingEngine&quot;);
+	renderer = static_pointer_cast&lt;RenderingEngine&gt;(tmpRenderer);
+
+	setSceneRadius(2);
+	showEntireScene();
+	resize(720, 576);
+	setAnimationPeriod(1);
+	saveSnapShots = false;
+	frameNumber=0;
+}
+
+
+GLSimulationPlayerViewer::~GLSimulationPlayerViewer(){}
+
+
+void GLSimulationPlayerViewer::initializeGL()
+{
+	QGLViewer::initializeGL();
+	renderer-&gt;init();
+}
+
+
+void GLSimulationPlayerViewer::draw()
+{
+	if (rootBody)
+	{
+		//renderer-&gt;drawBoundingVolume = false;
+		//renderer-&gt;drawGeometricalModel = true;
+		renderer-&gt;render(rootBody);
+	}
+}
+
+
+void GLSimulationPlayerViewer::fastDraw(){ if (rootBody){renderer-&gt;render(rootBody);} }
+
+
+void GLSimulationPlayerViewer::animate()
+{
+	if (!loadPositionOrientationFile()){
+		frameNumber=0;
+		stopAnimation();
+	} else {
+		if (saveSnapShots) {
+			setSnapshotFormat(&quot;PNG&quot;);
+			setSnapshotFileName(outputBaseDirectory+&quot;/&quot;+outputBaseName+&quot;.png&quot;);
+			saveSnapshot(/*automatic*/true,/*overwrite*/ true);
+		}
+		frameNumber++;
+	}
+}
+
+
+void GLSimulationPlayerViewer::load(const string&amp; fileName)
+{
+	IOFormatManager::loadFromFile(&quot;XMLFormatManager&quot;,fileName,&quot;rootBody&quot;,rootBody);
+	updateGL();
+	frameNumber=0;
+	setSnapshotCounter(0);
+
+	for(vector&lt;shared_ptr&lt;Engine&gt; &gt;::iterator I=rootBody-&gt;engines.begin(); I!=rootBody-&gt;engines.end(); ++I){
+		LOG_TRACE((*I)-&gt;getClassName());
+		if((*I)-&gt;getClassName()==&quot;PositionOrientationRecorder&quot;){
+			const shared_ptr&lt;PositionOrientationRecorder&gt; por=dynamic_pointer_cast&lt;PositionOrientationRecorder&gt;(*I);
+			assert(por);
+			LOG_DEBUG(&quot;Got PositionOrientationRecorder&quot;);
+			size_t dirSep=por-&gt;outputFile.rfind(&quot;/&quot;);
+			string path,prefix;
+			if(dirSep!=string::npos){
+				path=por-&gt;outputFile.substr(0,dirSep);
+				prefix=por-&gt;outputFile.substr(dirSep+1 /* without slash, till the end */);
+			} else { prefix=por-&gt;outputFile; }
+			if(inputBaseDirectory.empty()){ inputBaseDirectory=path; } if(inputBaseName.empty()){ inputBaseName=prefix; }
+		}
+	}
+	
+	LOG_DEBUG(&quot;Using directory `&quot;&lt;&lt;inputBaseDirectory&lt;&lt;&quot;' and basename `&quot;&lt;&lt;inputBaseName&lt;&lt;&quot;'.&quot;);
+	if(!filesystem::exists(filesystem::path(inputBaseDirectory))){ LOG_FATAL(&quot;Base xyz directory `&quot;&lt;&lt;inputBaseDirectory&lt;&lt;&quot;' doesn't exist!!&quot;); return;}
+	filesystem::directory_iterator dEnd;
+	xyzFiles.clear();
+	for(filesystem::directory_iterator dIter(inputBaseDirectory); dIter!=dEnd; dIter++){
+		if(dIter-&gt;leaf().find(inputBaseName)!=0 || filesystem::is_directory(*dIter) || !filesystem::exists(*dIter)) continue;
+		xyzFiles.push_back(dIter-&gt;string());
+		//LOG_TRACE(&quot;Added &quot;&lt;&lt;dIter-&gt;string());
+	}
+	xyzFiles.sort();
+	xyzFilesIter=xyzFiles.begin();
+	//for(list&lt;string&gt;::iterator I=xyzFiles.begin(); I!=xyzFiles.end(); I++){LOG_TRACE(*I);}
+}
+
+
+void GLSimulationPlayerViewer::doOneStep()
+{
+	if (!loadPositionOrientationFile())
+	{
+		frameNumber=0;
+		stopAnimation();
+	}
+	else frameNumber++;
+	updateGL();
+}
+
+
+void GLSimulationPlayerViewer::reset()
+{
+	frameNumber = 0;
+	setSnapshotCounter(0);
+	xyzFilesIter=xyzFiles.begin();
+	loadPositionOrientationFile();
+	frameNumber++;
+	updateGL();
+}
+
+
+bool GLSimulationPlayerViewer::loadPositionOrientationFile()
+{
+	if(xyzFilesIter==xyzFiles.end()) return false;
+	fileName=*(xyzFilesIter++);
+	ifstream f(fileName.c_str());
+	if(!f.good()){LOG_FATAL(&quot;Snapshot file &quot;&lt;&lt;fileName&lt;&lt;&quot; could not be opened for reading (fatal, ending sequence)?!&quot;); return false;}
+	LOG_TRACE(fileName);
+	for(unsigned long id=0; !f.eof() &amp;&amp; !f.fail() &amp;&amp; id&lt;=(rootBody-&gt;bodies-&gt;size()-1); id++){
+		shared_ptr&lt;Body&gt; b=(*(rootBody-&gt;bodies))[id];
+		if(!b){ LOG_ERROR(&quot;Body #&quot;&lt;&lt;id&lt;&lt;&quot; doesn't exist (skipped)!&quot;); continue; }
+		if(!b-&gt;physicalParameters) {LOG_ERROR(&quot;Body #&quot;&lt;&lt;id&lt;&lt;&quot; has no physical parameters?! (skipping)&quot;); continue; }
+		Se3r&amp; mySe3=b-&gt;physicalParameters-&gt;se3;
+		f&gt;&gt;mySe3.position[0]&gt;&gt;mySe3.position[1]&gt;&gt;mySe3.position[2]&gt;&gt;mySe3.orientation[0]&gt;&gt;mySe3.orientation[1]&gt;&gt;mySe3.orientation[2]&gt;&gt;mySe3.orientation[3];
+	}
+	f.close();
+	return true;
+}
+
+

Copied: trunk/gui/qt3/GLSimulationPlayerViewer.hpp (from rev 1273, trunk/gui/qt3/GLSimulationPlayerViewer.hpp)
===================================================================
--- trunk/gui/qt3/GLSimulationPlayerViewer.hpp	2008-03-03 15:51:38 UTC (rev 1273)
+++ trunk/gui/qt3/GLSimulationPlayerViewer.hpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -0,0 +1,55 @@
+/*************************************************************************
+*  Copyright (C) 2004 by Olivier Galizzi                                 *
+*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">olivier.galizzi at imag.fr</A>                                               *
+*                                                                        *
+*  This program is free software; it is licensed under the terms of the  *
+*  GNU General Public License v2 or later. See file LICENSE for details. *
+*************************************************************************/
+
+#ifndef SIMULATIONPLAYERVIEWER_HPP
+#define SIMULATIONPLAYERVIEWER_HPP
+
+#include&lt;yade/core/Omega.hpp&gt;
+#include&lt;yade/core/RenderingEngine.hpp&gt;
+#include&lt;yade/core/MetaBody.hpp&gt;
+#include&lt;yade/lib-QGLViewer/qglviewer.h&gt;
+
+#include&lt;boost/filesystem/operations.hpp&gt;
+#include&lt;boost/filesystem/convenience.hpp&gt;
+
+
+class GLSimulationPlayerViewer : public QGLViewer
+{
+/// Attributes
+	private :
+		shared_ptr&lt;RenderingEngine&gt;	 renderer;
+		shared_ptr&lt;MetaBody&gt;		 rootBody;
+	public:
+		
+		string fileName, inputBaseName, inputBaseDirectory, outputBaseName, outputBaseDirectory;
+		bool				 saveSnapShots;
+		int				 frameNumber;
+		bool loadPositionOrientationFile();
+		list&lt;string&gt; xyzFiles;
+		list&lt;string&gt;::iterator xyzFilesIter;
+	public :
+		GLSimulationPlayerViewer(QWidget * parent=0,char*name=0);
+		virtual ~GLSimulationPlayerViewer();
+
+		void setRootBody(shared_ptr&lt;MetaBody&gt; rb) { rootBody = rb;};
+		void load(const string&amp; fileName);
+
+		
+		void doOneStep();
+		void reset();
+
+	protected :
+		virtual void draw();
+		virtual void fastDraw();
+		virtual void animate();
+		virtual void initializeGL();
+	DECLARE_LOGGER;
+};
+
+#endif // SIMULATIONVIEWER_HPP
+

Copied: trunk/gui/qt3/QtGeneratedSimulationPlayer.ui (from rev 1273, trunk/gui/qt3/QtGeneratedSimulationPlayer.ui)
===================================================================
--- trunk/gui/qt3/QtGeneratedSimulationPlayer.ui	2008-03-03 15:51:38 UTC (rev 1273)
+++ trunk/gui/qt3/QtGeneratedSimulationPlayer.ui	2008-03-18 10:17:56 UTC (rev 1281)
@@ -0,0 +1,489 @@
+&lt;!DOCTYPE UI&gt;&lt;UI version=&quot;3.3&quot; stdsetdef=&quot;1&quot;&gt;
+&lt;class&gt;QtGeneratedSimulationPlayer&lt;/class&gt;
+&lt;widget class=&quot;QDialog&quot;&gt;
+    &lt;property name=&quot;name&quot;&gt;
+        &lt;cstring&gt;QtGeneratedSimulationPlayer&lt;/cstring&gt;
+    &lt;/property&gt;
+    &lt;property name=&quot;geometry&quot;&gt;
+        &lt;rect&gt;
+            &lt;x&gt;0&lt;/x&gt;
+            &lt;y&gt;0&lt;/y&gt;
+            &lt;width&gt;984&lt;/width&gt;
+            &lt;height&gt;652&lt;/height&gt;
+        &lt;/rect&gt;
+    &lt;/property&gt;
+    &lt;property name=&quot;sizePolicy&quot;&gt;
+        &lt;sizepolicy&gt;
+            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+        &lt;/sizepolicy&gt;
+    &lt;/property&gt;
+    &lt;property name=&quot;caption&quot;&gt;
+        &lt;string&gt;Simulation Player&lt;/string&gt;
+    &lt;/property&gt;
+    &lt;grid&gt;
+        &lt;property name=&quot;name&quot;&gt;
+            &lt;cstring&gt;unnamed&lt;/cstring&gt;
+        &lt;/property&gt;
+        &lt;spacer row=&quot;0&quot; column=&quot;0&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;spacer1_2&lt;/cstring&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+                &lt;enum&gt;Vertical&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+                &lt;enum&gt;Expanding&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot;&gt;
+                &lt;size&gt;
+                    &lt;width&gt;20&lt;/width&gt;
+                    &lt;height&gt;60&lt;/height&gt;
+                &lt;/size&gt;
+            &lt;/property&gt;
+        &lt;/spacer&gt;
+        &lt;widget class=&quot;GLSimulationPlayerViewer&quot; row=&quot;0&quot; column=&quot;1&quot; rowspan=&quot;5&quot; colspan=&quot;1&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;glSimulationPlayerViewer&lt;/cstring&gt;
+            &lt;/property&gt;
+        &lt;/widget&gt;
+        &lt;widget class=&quot;QGroupBox&quot; row=&quot;3&quot; column=&quot;0&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;gbController&lt;/cstring&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+                &lt;sizepolicy&gt;
+                    &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                    &lt;vsizetype&gt;4&lt;/vsizetype&gt;
+                    &lt;horstretch&gt;0&lt;/horstretch&gt;
+                    &lt;verstretch&gt;0&lt;/verstretch&gt;
+                &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;title&quot;&gt;
+                &lt;string&gt;Controller&lt;/string&gt;
+            &lt;/property&gt;
+            &lt;hbox&gt;
+                &lt;property name=&quot;name&quot;&gt;
+                    &lt;cstring&gt;unnamed&lt;/cstring&gt;
+                &lt;/property&gt;
+                &lt;widget class=&quot;QPushButton&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbPlay&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image0&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbStep&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image1&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbPause&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image2&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbReset&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image3&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+            &lt;/hbox&gt;
+        &lt;/widget&gt;
+        &lt;spacer row=&quot;4&quot; column=&quot;0&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;spacer1&lt;/cstring&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+                &lt;enum&gt;Vertical&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+                &lt;enum&gt;Expanding&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot;&gt;
+                &lt;size&gt;
+                    &lt;width&gt;20&lt;/width&gt;
+                    &lt;height&gt;60&lt;/height&gt;
+                &lt;/size&gt;
+            &lt;/property&gt;
+        &lt;/spacer&gt;
+        &lt;widget class=&quot;QGroupBox&quot; row=&quot;1&quot; column=&quot;0&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;gbInput&lt;/cstring&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+                &lt;sizepolicy&gt;
+                    &lt;hsizetype&gt;4&lt;/hsizetype&gt;
+                    &lt;vsizetype&gt;4&lt;/vsizetype&gt;
+                    &lt;horstretch&gt;0&lt;/horstretch&gt;
+                    &lt;verstretch&gt;0&lt;/verstretch&gt;
+                &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;title&quot;&gt;
+                &lt;string&gt;Input&lt;/string&gt;
+            &lt;/property&gt;
+            &lt;grid&gt;
+                &lt;property name=&quot;name&quot;&gt;
+                    &lt;cstring&gt;unnamed&lt;/cstring&gt;
+                &lt;/property&gt;
+                &lt;spacer row=&quot;4&quot; column=&quot;2&quot; rowspan=&quot;1&quot; colspan=&quot;2&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;spacer4&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;orientation&quot;&gt;
+                        &lt;enum&gt;Horizontal&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeType&quot;&gt;
+                        &lt;enum&gt;Expanding&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeHint&quot;&gt;
+                        &lt;size&gt;
+                            &lt;width&gt;40&lt;/width&gt;
+                            &lt;height&gt;20&lt;/height&gt;
+                        &lt;/size&gt;
+                    &lt;/property&gt;
+                &lt;/spacer&gt;
+                &lt;spacer row=&quot;4&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;spacer3&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;orientation&quot;&gt;
+                        &lt;enum&gt;Horizontal&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeType&quot;&gt;
+                        &lt;enum&gt;Expanding&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeHint&quot;&gt;
+                        &lt;size&gt;
+                            &lt;width&gt;40&lt;/width&gt;
+                            &lt;height&gt;20&lt;/height&gt;
+                        &lt;/size&gt;
+                    &lt;/property&gt;
+                &lt;/spacer&gt;
+                &lt;widget class=&quot;QLabel&quot; row=&quot;3&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;tlInputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Directory:&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot; row=&quot;4&quot; column=&quot;1&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbLoad&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Load&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLineEdit&quot; row=&quot;3&quot; column=&quot;1&quot; rowspan=&quot;1&quot; colspan=&quot;2&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;leInputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLineEdit&quot; row=&quot;1&quot; column=&quot;1&quot; rowspan=&quot;1&quot; colspan=&quot;3&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;leInputBaseName&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLabel&quot; row=&quot;1&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;tlInputBaseName&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Base Name:&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLabel&quot; row=&quot;0&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;tlInputConfigFile&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Simluation File:&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot; row=&quot;3&quot; column=&quot;3&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbInputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image4&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLineEdit&quot; row=&quot;0&quot; column=&quot;1&quot; rowspan=&quot;1&quot; colspan=&quot;2&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;leInputConfigFile&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot; row=&quot;0&quot; column=&quot;3&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbInputConfigFile&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image4&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+            &lt;/grid&gt;
+        &lt;/widget&gt;
+        &lt;widget class=&quot;QGroupBox&quot; row=&quot;2&quot; column=&quot;0&quot;&gt;
+            &lt;property name=&quot;name&quot;&gt;
+                &lt;cstring&gt;gbSnapShots&lt;/cstring&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizePolicy&quot;&gt;
+                &lt;sizepolicy&gt;
+                    &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                    &lt;vsizetype&gt;4&lt;/vsizetype&gt;
+                    &lt;horstretch&gt;0&lt;/horstretch&gt;
+                    &lt;verstretch&gt;0&lt;/verstretch&gt;
+                &lt;/sizepolicy&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;title&quot;&gt;
+                &lt;string&gt;Snap Shots Directory&lt;/string&gt;
+            &lt;/property&gt;
+            &lt;grid&gt;
+                &lt;property name=&quot;name&quot;&gt;
+                    &lt;cstring&gt;unnamed&lt;/cstring&gt;
+                &lt;/property&gt;
+                &lt;widget class=&quot;QLineEdit&quot; row=&quot;3&quot; column=&quot;1&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;leOutputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;/tmp&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLabel&quot; row=&quot;1&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;tlOuputBaseName&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Base Name:&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QPushButton&quot; row=&quot;3&quot; column=&quot;2&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;pbOutputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;4&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;4&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;&lt;/string&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;pixmap&quot;&gt;
+                        &lt;pixmap&gt;image4&lt;/pixmap&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLineEdit&quot; row=&quot;1&quot; column=&quot;1&quot; rowspan=&quot;1&quot; colspan=&quot;2&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;leOutputBaseName&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizePolicy&quot;&gt;
+                        &lt;sizepolicy&gt;
+                            &lt;hsizetype&gt;1&lt;/hsizetype&gt;
+                            &lt;vsizetype&gt;1&lt;/vsizetype&gt;
+                            &lt;horstretch&gt;0&lt;/horstretch&gt;
+                            &lt;verstretch&gt;0&lt;/verstretch&gt;
+                        &lt;/sizepolicy&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;frame-&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QCheckBox&quot; row=&quot;0&quot; column=&quot;0&quot; rowspan=&quot;1&quot; colspan=&quot;3&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;cbSaveSnapShots&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Save Snapshots&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+                &lt;widget class=&quot;QLabel&quot; row=&quot;3&quot; column=&quot;0&quot;&gt;
+                    &lt;property name=&quot;name&quot;&gt;
+                        &lt;cstring&gt;tlOutputDirectory&lt;/cstring&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                        &lt;string&gt;Directory:&lt;/string&gt;
+                    &lt;/property&gt;
+                &lt;/widget&gt;
+            &lt;/grid&gt;
+        &lt;/widget&gt;
+    &lt;/grid&gt;
+&lt;/widget&gt;
+&lt;customwidgets&gt;
+    &lt;customwidget&gt;
+        &lt;class&gt;GLSimulationPlayerViewer&lt;/class&gt;
+        &lt;header location=&quot;local&quot;&gt;GLSimulationPlayerViewer.hpp&lt;/header&gt;
+        &lt;sizehint&gt;
+            &lt;width&gt;-1&lt;/width&gt;
+            &lt;height&gt;-1&lt;/height&gt;
+        &lt;/sizehint&gt;
+        &lt;container&gt;0&lt;/container&gt;
+        &lt;sizepolicy&gt;
+            &lt;hordata&gt;5&lt;/hordata&gt;
+            &lt;verdata&gt;5&lt;/verdata&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+        &lt;/sizepolicy&gt;
+        &lt;pixmap&gt;image5&lt;/pixmap&gt;
+    &lt;/customwidget&gt;
+&lt;/customwidgets&gt;
+&lt;images&gt;
+    &lt;image name=&quot;image0&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;160&quot;&gt;89504e470d0a1a0a0000000d4948445200000015000000150806000000a917a5960000006749444154388dadccd10d80300c03d1947118a1fbcb23b00e2c4013dbc9fd9ef4168098eecae6def73b8eba70893a3085aa308d2ab084b2b08c32b08556b08d66700b3dc16d1478d628fa07b6d01368a31968a11528a30c28a12c48a30a48a12a58a20e1811f101d3512a7c38fee1ac0000000049454e44ae426082&lt;/data&gt;
+    &lt;/image&gt;
+    &lt;image name=&quot;image1&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;181&quot;&gt;89504e470d0a1a0a0000000d4948445200000015000000150806000000a917a5960000007c49444154388db5d5c10dc0200805d0da749a8ee0fe6104d7694f4d0851f91f28270de479e2db44e4a8aeeb3bf47e3fba21329aeee9bb57273a681f2d411998425198461138847a7018ddc1297405a7d1195c825ab80cd51b5782da154ea3b34c48a1ab9009a3bbd40aa15e0cd22892ab148a06358c32c9dffef8a35ea81230cf566a45c40000000049454e44ae426082&lt;/data&gt;
+    &lt;/image&gt;
+    &lt;image name=&quot;image2&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;113&quot;&gt;89504e470d0a1a0a0000000d4948445200000015000000150806000000a917a5960000003849444154388d633c76ec1803b50113d54da495a12cd804adacb4fe23f38f1dbbc6488c1c0c0c1def8f1a3a6ae8a8a123d350c6915df203007bf20ccfb0566fcb0000000049454e44ae426082&lt;/data&gt;
+    &lt;/image&gt;
+    &lt;image name=&quot;image3&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;119&quot;&gt;89504e470d0a1a0a0000000d4948445200000015000000150806000000a917a5960000003e49444154388d633c76ec1803b50113d54d1c5286b2a00b585969fd27d59063c7ae3122f3878ef7470d1d3574d4506a028c0205bd7020070c1defd3c45000a13508e31a4d23f00000000049454e44ae426082&lt;/data&gt;
+    &lt;/image&gt;
+    &lt;image name=&quot;image4&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;892&quot;&gt;89504e470d0a1a0a0000000d4948445200000018000000180806000000e0773df800000343494441544889ed95cf6f146518c73f5d5a8b96a5ab6de84230b6b02858b134023d28743de8414d6a8c7f01ff801aaf24c24d2f0ac6709693f1a0f5e4c5c42e8907f560a736c4d616322dd275b7753bdb617766f6fdf17898e9b26db798102f263ec924cfccfbe4f3fd3ecffb2403ffc743c408f00e3099493fbafefc338704986a53370e7c909c6dd6f46e2fea68c92780cfcf9d3e92397f26c7f8991ce363c748a552bcffe1249f5e2f5c023ce0cdde7d7bf3e74e1fe5a5178ef0daf967393cd0cbb52f7ee0e2d56f2f0197771398aafc319b4ffbdfd3914a01202288152a5e8deb5fff8888f0e2e810c3b92cc65a8cb1186dd0da50a9d6197dfb6307186d15e86c7df1aa1efb3ac03434d65aac8d018fa4e0c25b679b40dfafa38dc1688bd686a8a1d0da72b03f7daab8e64f259dbe0b2cb50a384b6595ef4f871863304630d6a055ecb01d501bc37a790d43378ff53dc5b5cfae706ae444fe9bafbee4bd8b571de072ab80e7380ec363d0084394d2281d0b6c07d6ea0d0e0c8d923994e3f8cbc364d25d1094e347cde3955c0077fb880a9ee761f61cc6f7570942454369362a1eb55a83fd0347c9648f317af669b2d9be045882!
 fa34d40191982250f8690ea0b0e30e5cd7258a0ee0fb012b772b3c79f2154e8e3d4736fb440c0bca102d4269710b50442059082b961b3fcf7bc0d27601d7755d3a7bdee0aefb1df90b1f9131b720b809c5c4e12633015a2b8858ac3548b214337377009c765bb404201d5d74f6f493e98e60b5747f5d45106b6390c430b1a6b96db1806171b9d81ccf8e1101186bd9d3bd1fa915b15a379dd90420d292b7f9eefcb6bc85b745c07166101106064fa0c27be830481c9b16973be156ee9f19ad77efa05aad22081beb1542df60a260db185af264f69bc2c618b4d6fcba50dcbd03e2dd1ddcdb9326dc28b5779d8063a0a1d1d0440d451429eefc59e5e6ad32c08ddd054406b343c78956969b176713874a1b948a6161a49873d798febd84b350667671955aa80ac0950775c0bd0d9f747f1f4150472b4d4369c22886ce2dad313d5f6266a1cceced55af1628279977a1d5f503051e3f98a3abd3e216ffe297f9620c5c2c737ba5ead502b5092b0033ed80ff149f4c4cbc2eafe6c704580726897f3e230f03db2dc6ff6de07f3bfe067d9f88db21915f870000000049454e44ae426082&lt;/data&gt;
+    &lt;/image&gt;
+    &lt;image name=&quot;image5&quot;&gt;
+        &lt;data format=&quot;PNG&quot; length=&quot;1002&quot;&gt;89504e470d0a1a0a0000000d4948445200000016000000160806000000c4b46c3b000003b149444154388dad945f4c5b551cc73fe7dc4b7b4bcba0762d45c43114323599ee6192609c51d883892ce083f1718b3ebb185f8dc91e972cf39d2d2a2f1af664b6f1e0fe3863a0718969700eb0c52142da0242a1bd6d696f7bcff101585203ceb8fd9ece39f99dcff9fe7edf939f88c562ec465f5f9fe609442c161362173c3e3eae7b7a7ac8e7f36432196cdbfe4f907c3e4f2291201e8fe338cec3737357e9e8e828aded1e229d650e1f2d51754b082110124c13a4dc5ea341eb9dc284c0558a853f3ce8cb0677ef500fde7d39d2596679e326597b8e9abb85d7a770ab16ab6983ec5a05b487a70e36f0f4e10afe408d6a558310980108478dba4a1e8233990c5d474b64ed39aa3a8fe5f3317fbf81dbd70bccfeb205947632fd74f6589c1c6ea2f70d03a58ba0c1f2c9bdc1b66de3b8256a6e11cbe7e3ee1d181b590124fe2693aeee08d223c82c3a2c24b7b874bec8f26288774f7bd054504aef0dde6e99c0eb83f9fb266323cb80a27fb0958141836044605a2ee5523393371cc646fee2da37195aa35d0c0c5b4859ac03d7e91712dcaac5adab3650a3ff9d08ef7dd8404bb48869e5d958b5b87dadc4c9a1464e9f0d0326df7!
 ebd86bd2e310cb1bf62d384d59441f2d70a070e1c60e09489929b988681bdd9cc97170bcc4c65595f71f8e0e3301337fc24a7732467831875a47f289652b0be5e4151e6d07316c1b0c0340d8ab92023e76d66a6b2840e36d2fb7a13fee632475e6edc367ea98a90fb98b7dd6310ca0328a44761582e1bab41befabcc0ec940d28bc5e93b68e064cab84e1d9beaeb48934eac1f53b01c1b000fca496aa54b61a99fcde61662a4b4b4b23d1680be9d426173e4df3602a48ea411989a4fd590f52a8fd156b05ed9d350e3defe3cfdf4b4c7ce770ea7d3fb9f520afbe1620daeee5c26735d20b9b9cfb6811a754a439e4e5c5639a4caa1e5caf586bfc0197b78702005cb9b4cae4cd3267ce8638fe964bd72b393e39d74928d242617303a756a37f284447770dcdbffc6384a05a85de1306e9a52057c7527c7131c3c42d3f475eb2303c82d4fc3276d6811db37efeb148723082d9b08f79f97c1e5729109a9a28307cc622d2d6cdf52b2b24efe548dedb00142009862cfa879ee1a71f6cec928353511472fbf4389148b0b0e0c108081412458dfe21c9f11351e67e7358595468246d1d1e5e38a6e9e851bc39d84ab502a669331dafec0d8ec7e3e8cb06e1a881d727d1ae40180a434a8c9db129a54126ad48a7358c2b4c5352c8c374bcccdab2bb37d8719cba79fab8211f9df218e05!
 82c261e95f8bfc04f1a1e8bc5c4dfe0a190172af6a9690000000049454e44a!
 e426082&lt;
/data&gt;
+    &lt;/image&gt;
+&lt;/images&gt;
+&lt;connections&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbInputDirectory&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbInputDirectoryClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbLoad&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbLoadClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbPause&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbPauseClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbPlay&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbPlayClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbReset&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbResetClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbOutputDirectory&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbOutputDirectoryClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbStep&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbStepClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;pbInputConfigFile&lt;/sender&gt;
+        &lt;signal&gt;clicked()&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;pbInputConfigFileClicked()&lt;/slot&gt;
+    &lt;/connection&gt;
+    &lt;connection&gt;
+        &lt;sender&gt;cbSaveSnapShots&lt;/sender&gt;
+        &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+        &lt;receiver&gt;QtGeneratedSimulationPlayer&lt;/receiver&gt;
+        &lt;slot&gt;cbSaveSnapShotsToggled(bool)&lt;/slot&gt;
+    &lt;/connection&gt;
+&lt;/connections&gt;
+&lt;slots&gt;
+    &lt;slot&gt;pbLoadClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbInputDirectoryClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbOutputDirectoryClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbPlayClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbPauseClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbStepClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbResetClicked()&lt;/slot&gt;
+    &lt;slot&gt;pbInputConfigFileClicked()&lt;/slot&gt;
+    &lt;slot&gt;cbSaveSnapShotsToggled(bool)&lt;/slot&gt;
+&lt;/slots&gt;
+&lt;layoutdefaults spacing=&quot;6&quot; margin=&quot;11&quot;/&gt;
+&lt;includehints&gt;
+    &lt;includehint&gt;GLSimulationPlayerViewer.hpp&lt;/includehint&gt;
+&lt;/includehints&gt;
+&lt;/UI&gt;

Copied: trunk/gui/qt3/QtSimulationPlayer.cpp (from rev 1273, trunk/gui/qt3/QtSimulationPlayer.cpp)
===================================================================
--- trunk/gui/qt3/QtSimulationPlayer.cpp	2008-03-03 15:51:38 UTC (rev 1273)
+++ trunk/gui/qt3/QtSimulationPlayer.cpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -0,0 +1,116 @@
+/*************************************************************************
+*  Copyright (C) 2004 by Olivier Galizzi                                 *
+*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">olivier.galizzi at imag.fr</A>                                               *
+*                                                                        *
+*  This program is free software; it is licensed under the terms of the  *
+*  GNU General Public License v2 or later. See file LICENSE for details. *
+*************************************************************************/
+
+#include &quot;QtSimulationPlayer.hpp&quot;
+#include &quot;FileDialog.hpp&quot;
+#include &quot;GLSimulationPlayerViewer.hpp&quot;
+#include&lt;yade/core/FileGenerator.hpp&gt;
+#include &lt;qlineedit.h&gt;
+#include &lt;qpushbutton.h&gt;
+#include &lt;qspinbox.h&gt;
+
+QtSimulationPlayer::QtSimulationPlayer() : QtGeneratedSimulationPlayer()
+{
+	
+}
+
+
+QtSimulationPlayer::~QtSimulationPlayer()
+{
+}
+
+
+void QtSimulationPlayer::pbInputConfigFileClicked()
+{
+	string selectedFilter;
+	std::vector&lt;string&gt; filters;
+	filters.push_back(&quot;XML Yade File (*.xml)&quot;);
+	string fileName = FileDialog::getOpenFileName(&quot;.&quot;, filters, &quot;Choose a file to load&quot;, this-&gt;parentWidget()-&gt;parentWidget(),selectedFilter );
+ 
+	if (!fileName.empty() &amp;&amp; selectedFilter == &quot;XML Yade File (*.xml)&quot;)
+		leInputConfigFile-&gt;setText(fileName);
+}
+
+
+
+void QtSimulationPlayer::pbInputDirectoryClicked()
+{
+	string directory = FileDialog::getExistingDirectory ( &quot;.&quot;,&quot;Choose the directory where the recorded file are&quot;, this-&gt;parentWidget()-&gt;parentWidget());
+	if (!directory.empty())
+		leInputDirectory-&gt;setText(directory);
+}
+
+
+void QtSimulationPlayer::pbLoadClicked()
+{
+	glSimulationPlayerViewer-&gt;load(leInputConfigFile-&gt;text());
+	leInputBaseName-&gt;setText(glSimulationPlayerViewer-&gt;inputBaseName);
+	leInputDirectory-&gt;setText(glSimulationPlayerViewer-&gt;inputBaseDirectory);
+}
+
+
+void QtSimulationPlayer::pbOutputDirectoryClicked()
+{
+	string directory = FileDialog::getExistingDirectory ( &quot;.&quot;,&quot;Choose the directory where to save the sna shots&quot;, this-&gt;parentWidget()-&gt;parentWidget());
+	if (!directory.empty())
+		leOutputDirectory-&gt;setText(directory.c_str());
+
+}
+
+
+void QtSimulationPlayer::pbPlayClicked()
+{	
+	setParameters();
+
+	glSimulationPlayerViewer-&gt;startAnimation();
+
+}
+
+
+void QtSimulationPlayer::pbPauseClicked()
+{	
+	glSimulationPlayerViewer-&gt;stopAnimation();
+}
+
+
+void QtSimulationPlayer::pbStepClicked()
+{
+	glSimulationPlayerViewer-&gt;stopAnimation();
+	glSimulationPlayerViewer-&gt;doOneStep();
+}
+
+
+void QtSimulationPlayer::pbResetClicked()
+{
+	setParameters();
+	glSimulationPlayerViewer-&gt;reset();
+}
+
+
+void QtSimulationPlayer::cbSaveSnapShotsToggled(bool b)
+{
+	glSimulationPlayerViewer-&gt;saveSnapShots=b;
+}
+
+
+void QtSimulationPlayer::closeEvent(QCloseEvent *e)
+{
+	QtGeneratedSimulationPlayer::closeEvent(e);
+	
+}
+
+
+void QtSimulationPlayer::setParameters()
+{
+	glSimulationPlayerViewer-&gt;inputBaseName=leInputBaseName-&gt;text().ascii();
+	glSimulationPlayerViewer-&gt;inputBaseDirectory=leInputDirectory-&gt;text().ascii();
+	glSimulationPlayerViewer-&gt;outputBaseName=leOutputBaseName-&gt;text().ascii();
+	glSimulationPlayerViewer-&gt;outputBaseDirectory=leOutputDirectory-&gt;text().ascii();
+}
+
+

Copied: trunk/gui/qt3/QtSimulationPlayer.hpp (from rev 1273, trunk/gui/qt3/QtSimulationPlayer.hpp)

Modified: trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.cpp
===================================================================
--- trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.cpp	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.cpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -4,19 +4,26 @@
 #include&lt;yade/pkg-common/ParticleParameters.hpp&gt;
 
 void CentralGravityEngine::applyCondition(Body* _rootBody){
+	/* get &quot;rootBody&quot;, which is the whole simulation */
 	MetaBody* rootBody=YADE_CAST&lt;MetaBody*&gt;(_rootBody);
+	/* get the central body, by its id; cast its Body::physicalParameters to ParticleParameters, since we need the mass */
 	Real centralMass=YADE_PTR_CAST&lt;ParticleParameters&gt;(Body::byId(centralBody)-&gt;physicalParameters)-&gt;mass;
+	/* position of the central body */
 	const Vector3r&amp; centralPos=Body::byId(centralBody)-&gt;physicalParameters-&gt;se3.position;
+	/* loop over all bodies */
 	BodyContainer::iterator Iend=rootBody-&gt;bodies-&gt;end();
 	for(BodyContainer::iterator I=rootBody-&gt;bodies-&gt;begin(); I!=Iend; ++I){
 		const shared_ptr&lt;Body&gt;&amp; b(*I);
 		if(b-&gt;isClumpMember()) continue; // skip clump members
-		if(b-&gt;getId()==centralBody) continue; // don't gravitate central body to itself
-		Real myMass=YADE_PTR_CAST&lt;ParticleParameters&gt;(b-&gt;physicalParameters)-&gt;mass; // will crash nicely in debug builds
-		const Vector3r&amp; myPos=b-&gt;physicalParameters-&gt;se3.position;
-		Real F=kappa*centralMass*myMass/(centralPos-myPos).SquaredLength();
-		Vector3r toCenter=centralPos-myPos; toCenter.Normalize();
+		if(b-&gt;getId()==centralBody) continue; // don't gravitate central body to itself (would be div by zero)
+		Real myMass=YADE_PTR_CAST&lt;ParticleParameters&gt;(b-&gt;physicalParameters)-&gt;mass; // mass of the current body; if the body has no mass (responsibility of the user), it will crash gracefully in debug builds
+		const Vector3r&amp; myPos=b-&gt;physicalParameters-&gt;se3.position; // position of the current body;
+		Real F=kappa*centralMass*myMass/(centralPos-myPos).SquaredLength(); // force according to the gravity law
+		Vector3r toCenter=centralPos-myPos; toCenter.Normalize(); // unit vector between the elements
+		// apply force(s): first to the current body
 		static_cast&lt;Force*&gt;(rootBody-&gt;physicalActions-&gt;find(b-&gt;getId(),cachedForceClassIndex).get())-&gt;force+=F*toCenter;
+		// if uncommented, reverse force will be applied to the central body
+		// static_cast&lt;Force*&gt;(rootBody-&gt;physicalActions-&gt;find(centralBody,cachedForceClassIndex).get())-&gt;force-=F*toCenter;
 	}
 }
 

Modified: trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.hpp
===================================================================
--- trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.hpp	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/pkg/common/Engine/DeusExMachina/CentralGravityEngine.hpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -5,13 +5,21 @@
 
 /* Engine attracting all bodies towards a central body, using Newton's gravity law.
  *
+ * <A HREF="http://en.wikipedia.org/wiki/Newton%27s_law_of_universal_gravitation.">http://en.wikipedia.org/wiki/Newton%27s_law_of_universal_gravitation.</A>
+ * Unlike in real gravity, there are no forces exerted on the central body.
+ * Should there be? This way, we don't have energy conservation.
+ *
+ * @todo This code has not been yet tested at all.
+ *
  */
 
 class CentralGravityEngine: public DeusExMachina {
 	private:
 		int cachedForceClassIndex;
 	public:
+		//! The body towards which all other bodies are attracted.
 		body_id_t centralBody;
+		//! The gravity constant. Must be big enough to have realistic influence when masses are small.
 		Real kappa;
 		CentralGravityEngine(){ shared_ptr&lt;Force&gt; f(new Force); cachedForceClassIndex=f-&gt;getClassIndex(); }
 		virtual ~CentralGravityEngine(){};

Modified: trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.cpp
===================================================================
--- trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.cpp	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.cpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -51,7 +51,11 @@
 	
 	if( Omega::instance().getCurrentIteration() % interval == 0 /*&amp;&amp; ofile*/ )
 	{
-		ofile.open( string(outputFile+&quot;_&quot;+lexical_cast&lt;string&gt;( Omega::instance().getCurrentIteration() )).c_str() );
+		ostringstream oss;
+		oss&lt;&lt;setfill('0')&lt;&lt;outputFile&lt;&lt;&quot;_&quot;&lt;&lt;setw(6)&lt;&lt;Omega::instance().getCurrentIteration();
+		cerr&lt;&lt;&quot;Snapshot &quot;&lt;&lt;oss.str()&lt;&lt;endl;
+		ofile.open(oss.str().c_str());
+		if(!ofile.good()){ cerr&lt;&lt;&quot;Snapshot &quot;&lt;&lt;oss.str()&lt;&lt;&quot; could not be opened for writing (skipping)!?&quot;&lt;&lt;endl; return; }
 	
 		Real tx=0, ty=0, tz=0, rw=0, rx=0, ry=0, rz=0;
 			

Modified: trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.hpp
===================================================================
--- trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.hpp	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/pkg/dem/Engine/StandAloneEngine/PositionOrientationRecorder.hpp	2008-03-18 10:17:56 UTC (rev 1281)
@@ -12,11 +12,18 @@
 #include&lt;yade/core/DataRecorder.hpp&gt;
 #include &lt;string&gt;
 #include &lt;fstream&gt;
-
+/*!
+ * Engine recording positions and orientation to plain ASCII files, primarily intended for use with the Simulation Player.
+ *
+ * See <A HREF="http://yade.wikia.com/wiki/New:Making_videos">http://yade.wikia.com/wiki/New:Making_videos</A> for details .
+ *
+ */
 class PositionOrientationRecorder : public DataRecorder
 {
 	public :
+		//! basename of the output files; for example, /tmp/xyz will produce /tmp/xyz_000010, /tmp/xyz_000020 and so on (with interval==10)
 		std::string outputFile;
+		//! modulo of iteration number when the se3's will be be written out
 		unsigned int interval;
 	
 		std::ofstream ofile;

Modified: trunk/scripts/default-test.py
===================================================================
--- trunk/scripts/default-test.py	2008-03-18 05:19:31 UTC (rev 1280)
+++ trunk/scripts/default-test.py	2008-03-18 10:17:56 UTC (rev 1281)
@@ -60,7 +60,7 @@
 		speed=nIter/(finish-start) # rough estimate
 		summary.append('%30s passed (%g iter/sec)'%(pp,speed))
 
-print &quot;\n\n========================================= SUMMARY&#160;======================================\n&quot;
+print &quot;\n\n========================================= SUMMARY ======================================\n&quot;
 for l in summary: print l
-print &quot;\n====================================== END&#160;OF SUMMARY&#160;==================================&quot;
+print &quot;\n====================================== END&#160;OF SUMMARY ==================================&quot;
 quit()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000245.html">[Yade-commits] r1280 - in trunk: lib/serialization pkg/common	pkg/common/Engine/DeusExMachina pkg/common/Engine/MetaEngine	pkg/common/RenderingEngine/GLDrawGeometricalModel	pkg/common/RenderingEngine/OpenGLRenderingEngine pkg/dem	pkg/dem/DataClass/InteractionPhysics	pkg/dem/Engine/EngineUnit pkg/dem/Engine/StandAloneEngine	pkg/dem/PreProcessor pkg/dem/RenderingEngine	pkg/dem/RenderingEngine/GLDrawCohesiveFrictionalContactInteraction	pkg/dem/RenderingEngine/GLDrawElasticContactInteraction	pkg/lattice/Engine/StandAloneEngine pkg/lattice/PreProcessor
</A></li>
	<LI>Next message: <A HREF="000247.html">[Yade-commits] r1282 - trunk/extra
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/yade-commits">More information about the Yade-commits
mailing list</a><br>
</body></html>
