<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Yade-commits] r1059 - in trunk: yade-core/src/yade	yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine	yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending	yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder	yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample	yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/yade-commits/2007/index.html" >
   <LINK REL="made" HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1059%20-%20in%20trunk%3A%20yade-core/src/yade%0A%09yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine%0A%09yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending%0A%09yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder%0A%09yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample%0A%09yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState&In-Reply-To=%3C200702101340.l1ADeIPb012711%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000023.html">
   <LINK REL="Next"  HREF="000025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Yade-commits] r1059 - in trunk: yade-core/src/yade	yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine	yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending	yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder	yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample	yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState</H1>
    <B>cosurgi at BerliOS</B> 
    <A HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1059%20-%20in%20trunk%3A%20yade-core/src/yade%0A%09yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine%0A%09yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending%0A%09yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder%0A%09yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder%0A%09yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample%0A%09yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState&In-Reply-To=%3C200702101340.l1ADeIPb012711%40sheep.berlios.de%3E"
       TITLE="[Yade-commits] r1059 - in trunk: yade-core/src/yade	yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine	yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending	yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder	yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder	yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample	yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState">cosurgi at mail.berlios.de
       </A><BR>
    <I>Sat Feb 10 14:40:18 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000023.html">[Yade-commits] r1058 - in trunk: . yade-core/src/yade yade-doc	yade-extra yade-extra/clump	yade-packages/yade-package-common/src/Engine/DeusExMachina/ForceEngine	yade-packages/yade-package-common/src/Engine/DeusExMachina/GravityEngine	yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogOrientationIntegrator	yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogPositionIntegrator	yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsForceLaw	yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsMomentumLaw	yade-packages/yade-package-common/src/Engine/StandAloneEngine/PersistentSAPCollider	yade-packages/yade-package-common/src/Engine/StandAloneEngine/SAPCollider	yade-packages/yade-package-common/src/RenderingEngine/GLDrawGeometricalModel/GLDrawSphere	yade-scripts
</A></li>
        <LI>Next message: <A HREF="000025.html">[Yade-commits] r1060 - in trunk: . yade-extra/clump	yade-libs/yade-lib-base/src/yade-lib-base
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: cosurgi
Date: 2007-02-10 14:40:12 +0100 (Sat, 10 Feb 2007)
New Revision: 1059

Modified:
   trunk/yade-core/src/yade/yade.cpp
   trunk/yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine/DisplacementEngine.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp
   trunk/yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters/LatticeBeamParameters.cpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder/BeamRecorder.cpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw/LatticeLaw.cpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.cpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.hpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder/NodeRecorder.cpp
   trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder/StrainRecorder.cpp
   trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp
   trunk/yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState/GLDrawLatticeBeamState.cpp
Log:
- a more prominent warning when PREFIX was not defined during compilation
- ThreePointBending does not crash when there is not file to load
- some fiddling with lattice



Modified: trunk/yade-core/src/yade/yade.cpp
===================================================================
--- trunk/yade-core/src/yade/yade.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-core/src/yade/yade.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -36,7 +36,7 @@
 	std::string tmp(BOOST_PP_STRINGIZE(PREFIX));
 	if(tmp==&quot;PREFIX&quot;) // if PREFIX is undefined, BOOST_PP_STRINGIZE returns the name instead of empty value
 	{
-		LOG_FATAL(&quot;undefined PREFIX, aborting&quot;);
+		LOG_FATAL(&quot;\n\nundefined PREFIX, aborting!! You should compile with CXXFLAGS eg. -DPREFIX=/home/user/YADE\n\n&quot;);
 		exit(1);
 	};
 	return tmp;
@@ -68,8 +68,8 @@
 void printHelp()
 {
 	string flags(&quot;&quot;);
-	flags=flags+&quot;PREFIX=&quot; +getPrefix()+ &quot;\n&quot;;
-	flags=flags+&quot;POSTFIX=&quot; + getPostfix() + &quot;\n&quot;;
+	flags=flags+&quot;   PREFIX=&quot; +getPrefix()+ &quot;\n&quot;;
+	flags=flags+&quot;   POSTFIX=&quot; + getPostfix() + &quot;\n&quot;;
 #ifdef SINGLE_PRECISION
 	flags+=&quot;SINGLE_PRECISION &quot;;
 #endif

Modified: trunk/yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine/DisplacementEngine.cpp
===================================================================
--- trunk/yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine/DisplacementEngine.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-common/src/Engine/DeusExMachina/DisplacementEngine/DisplacementEngine.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -14,12 +14,15 @@
 	if(deserializing)
 	{
 		translationAxis.Normalize();
+
 		/*
 		if(displacement==0)
 			displacement=2e-10;
 		else
 			displacement=0;
 		*/
+	//	displacement *= 10.0;
+
 		std::cerr &lt;&lt; &quot;displacement: &quot; &lt;&lt; displacement &lt;&lt; &quot;\n&quot;;
 	}
 }

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -168,6 +168,8 @@
 			return &quot;Error: cannot load the file that should contain spheres&quot;;
 		}
 	}
+	else
+		return &quot;Error: cannot load the file that should contain spheres&quot;;
 /////////////////////////////////////
 	Vector3r min(10000,10000,10000),max(-10000,-10000,-10000);
 	{// calc min/max

Modified: trunk/yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters/LatticeBeamParameters.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters/LatticeBeamParameters.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/DataClass/PhysicalParameters/LatticeBeamParameters/LatticeBeamParameters.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -30,6 +30,19 @@
 {
 	if(deserializing)
 	{
+
+	//	torsionalStiffness /= 10.0;
+
+	//	static bool first=true;
+	//	if(first)
+	//		std::cerr &lt;&lt; &quot;using dt for k.b\n&quot;, first=false;
+	//	bendingStiffness    = Omega::instance().getTimeStep();
+
+//		bendingStiffness		/= 10.0;
+//		longitudalStiffness		/= 10.0;
+//		criticalTensileStrain		*= 10.0;
+
+
 /*		if(criticalTensileStrain &gt; 0.00015) // E.l
 		{ // CEMENT MATRIX
 			longitudalStiffness       = 1.0;	// k.l
@@ -104,11 +117,6 @@
 		}
 #undef chk
 
-
-
-
-	//	bendingStiffness    *= 25000;
-	//	longitudalStiffness *= 25000;
         }
 }
 

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder/BeamRecorder.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder/BeamRecorder.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/BeamRecorder/BeamRecorder.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -45,9 +45,11 @@
 {
 	if(deserializing)
 	{
+	//	outputFile += &quot;_&quot;+boost::lexical_cast&lt;std::string&gt;(Omega::instance().getTimeStep());
+	//	std::cerr &lt;&lt; &quot;using dt for BeamRecorder output file: &quot; &lt;&lt; outputFile &lt;&lt; &quot;\n&quot;;
+
 		ofile.open(outputFile.c_str());
-//		first = true;
-//		subscribedBodies.clear();
+
 	}
 }
 

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw/LatticeLaw.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw/LatticeLaw.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/LatticeLaw/LatticeLaw.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -311,11 +311,41 @@
 		Vector3r beam_vec = beam-&gt;length * beam-&gt;direction;
 		{ // 'B' from picture - rotate to align with neighbouring beams
 
+/*   
+ *   Bending stiffness different for compression and tension.
+ *
+			Real kb = beam-&gt;bendingStiffness;
+			Real Em = beam-&gt;criticalTensileStrain/2.0;
+			Real x  = beam-&gt;strain();
+			const Real howmuch = 0.5;
+
+		//	if(beam-&gt;strain() &lt; 0) // compression
+		//	//if(beam-&gt;strain() &gt; 0) // tension
+		//		kb *= howmuch;	// FIXME - it's a material paramater. k.b in compression is 0.2 of k.b in tension.
+		//				// it should be a function in LatticeBeamParameters that returs correct value depending
+		//				// on tension/compression
+		
+		//	x&lt;-E ? kb*0.2 : ((kb*0.2+kb)/2+(kb*0.2-kb)/(-2*E)*x)
+
+			if( x &lt; -Em )
+				kb *= howmuch;
+			else if( x &lt; Em )
+				kb = (kb*howmuch+kb)/2.0+x*(kb*howmuch-kb)/(-2.0*Em);
+			// if strain &gt; criticalTensileStrain/2.0 then kb is not changed
+
+			node1-&gt;countStiffness += kb;
+			node2-&gt;countStiffness += kb;
+
+			node1-&gt;displacementAlignmental += (beam-&gt;bendingRotation * ( beam_vec) - beam_vec) * kb;
+			node2-&gt;displacementAlignmental += (beam-&gt;bendingRotation * (-beam_vec) + beam_vec) * kb;
+
+*/
 			node1-&gt;countStiffness += beam-&gt;bendingStiffness;
 			node2-&gt;countStiffness += beam-&gt;bendingStiffness;
 
 			node1-&gt;displacementAlignmental += (beam-&gt;bendingRotation * ( beam_vec) - beam_vec) * beam-&gt;bendingStiffness;
 			node2-&gt;displacementAlignmental += (beam-&gt;bendingRotation * (-beam_vec) + beam_vec) * beam-&gt;bendingStiffness;
+
 		}
 		
 		if(calcTorsion)

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -21,6 +21,7 @@
 	interval = 50;
 	horizontal = vertical -1.0;
 	bottom = upper = left = right = -1;
+	idx=0;
 }
 
 
@@ -28,9 +29,11 @@
 {
 	if(deserializing)
 	{
-//		outputFile=&quot;../data/strain-C8&quot;;
-//		outputFile[15]='B';
+	//	outputFile += &quot;_&quot;+boost::lexical_cast&lt;std::string&gt;(Omega::instance().getTimeStep());
+	//	std::cerr &lt;&lt; &quot;using dt for poisson output file: &quot; &lt;&lt; outputFile &lt;&lt; &quot;\n&quot;;
+
 		ofile.open(outputFile.c_str());
+
 	}
 }
 
@@ -57,14 +60,17 @@
 
 void MeasurePoisson::action(Body * body)
 {
+
+
 	return;
+
 	if(bottom==-1 || upper==-1 || left==-1 || right==-1)
 	{
 		std::cerr &lt;&lt; &quot;bad nodes!\n&quot;;
 		return;
 	}
 	MetaBody * ncb = static_cast&lt;MetaBody*&gt;(body);
-	
+
 	LatticeNodeParameters* node_left   = dynamic_cast&lt;LatticeNodeParameters*&gt;( (*(ncb-&gt;bodies))[left  ]-&gt;physicalParameters . get() );
 	(*(ncb-&gt;bodies))[left  ]-&gt;geometricalModel-&gt;diffuseColor = Vector3f(1.0,1.0,0.0); // FIXME [1]
 	LatticeNodeParameters* node_right  = dynamic_cast&lt;LatticeNodeParameters*&gt;( (*(ncb-&gt;bodies))[right ]-&gt;physicalParameters . get() );
@@ -88,11 +94,18 @@
 	Real 	poisson2 = -1.0* ( (dd/d)
 			          / (dL/L));
 
+	last20[(idx++)%20] = poisson2;
+	Real avg=0;
+	if(idx&gt;22)
+		for(int i=0;i&lt;20;i++)
+			avg+=last20[i]*0.05;
+
 	Real	poisson3 = std::log(d/(dd-d))/std::log(dL/L+1.0);
 	
 	ofile	&lt;&lt; lexical_cast&lt;string&gt;(poisson1) &lt;&lt; &quot; &quot; 
 		&lt;&lt; lexical_cast&lt;string&gt;(poisson2) &lt;&lt; &quot; &quot; 
 		&lt;&lt; lexical_cast&lt;string&gt;(poisson3) &lt;&lt; &quot; &quot; 
+		&lt;&lt; &quot; avg: &quot; &lt;&lt; lexical_cast&lt;string&gt;(avg) &lt;&lt; &quot; &quot; 
 		&lt;&lt; endl; 
 		
 	// [1]

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.hpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.hpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/MeasurePoisson/MeasurePoisson.hpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -18,6 +18,9 @@
 {
 	private :
 		std::ofstream ofile; 
+		Real	last20[20];
+		int	idx;
+	
 
 	public :
 		std::string	 outputFile;

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder/NodeRecorder.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder/NodeRecorder.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/NodeRecorder/NodeRecorder.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -30,9 +30,11 @@
 {
 	if(deserializing)
 	{
+	//	outputFile += &quot;_&quot;+boost::lexical_cast&lt;std::string&gt;(Omega::instance().getTimeStep());
+	//	std::cerr &lt;&lt; &quot;using dt for NodeRecorder output file: &quot; &lt;&lt; outputFile &lt;&lt; &quot;\n&quot;;
+
 		ofile.open(outputFile.c_str());
-//		first = true;
-//		subscribedBodies.clear();
+
 	}
 }
 

Modified: trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder/StrainRecorder.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder/StrainRecorder.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/Engine/StandAloneEngine/StrainRecorder/StrainRecorder.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -26,9 +26,11 @@
 {
 	if(deserializing)
 	{
-//		outputFile=&quot;../data/strain-C8&quot;;
-//		outputFile[15]='B';
+	//	outputFile += &quot;_&quot;+boost::lexical_cast&lt;std::string&gt;(Omega::instance().getTimeStep());
+	//	std::cerr &lt;&lt; &quot;using dt for StrainRecorder output file: &quot; &lt;&lt; outputFile &lt;&lt; &quot;\n&quot;;
+
 		ofile.open(outputFile.c_str());
+
 	}
 }
 

Modified: trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -97,12 +97,12 @@
 	displacement_B_meters	 = 0.0001;
 
 	region_C_min 		 = Vector3r(-0.006, 0.096,-1);
-	region_C_max 		 = Vector3r( 0.16 , 0.16 , 1);
+	region_C_max 		 = Vector3r( 0.16 , 0.16 ,-1);
 	direction_C 		 = Vector3r(0,1,0);
 	displacement_C_meters	 = 0.0001;
 	
 	region_D_min 		 = Vector3r(-0.006,-0.006,-1);
-	region_D_max 		 = Vector3r( 0.16 , 0.004, 1);
+	region_D_max 		 = Vector3r( 0.16 , 0.004,-1);
         direction_D              = Vector3r(0,-1,0);
         displacement_D_meters    = 0.0001;
         

Modified: trunk/yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState/GLDrawLatticeBeamState.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState/GLDrawLatticeBeamState.cpp	2007-02-09 14:54:21 UTC (rev 1058)
+++ trunk/yade-packages/yade-package-lattice/src/RenderingEngine/GLDrawLatticeBeamState/GLDrawLatticeBeamState.cpp	2007-02-10 13:40:12 UTC (rev 1059)
@@ -11,6 +11,7 @@
 #include &lt;yade/yade-lib-opengl/OpenGLWrapper.hpp&gt;
 
 void GLDrawLatticeBeamState::go(const shared_ptr&lt;PhysicalParameters&gt;&amp; pp)
+	// FIXME:  instead of one argument 'bool wire_frame' it should get a class containing whole configuration of OpenGLRenderingEngine
 {
 	// FIXME the same in  GeometricalModelForceColorizer.cpp 
 	static Real maxTensileFactor = 0.0; // FIXME - thread unsafe
@@ -37,7 +38,7 @@
 	}
 	else if (factor &lt; 0 &amp;&amp; maxCompressFactor &lt; 0)
 	{
-		factor                  /= maxCompressFactor;
+		factor                  /= maxCompressFactor; // both are negative, so result is positive
 		glColor3v(Vector3f(1.0,0.9,0.9) - factor * Vector3f(0.0,0.9,0.9));
 	}
 	else


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000023.html">[Yade-commits] r1058 - in trunk: . yade-core/src/yade yade-doc	yade-extra yade-extra/clump	yade-packages/yade-package-common/src/Engine/DeusExMachina/ForceEngine	yade-packages/yade-package-common/src/Engine/DeusExMachina/GravityEngine	yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogOrientationIntegrator	yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogPositionIntegrator	yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsForceLaw	yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsMomentumLaw	yade-packages/yade-package-common/src/Engine/StandAloneEngine/PersistentSAPCollider	yade-packages/yade-package-common/src/Engine/StandAloneEngine/SAPCollider	yade-packages/yade-package-common/src/RenderingEngine/GLDrawGeometricalModel/GLDrawSphere	yade-scripts
</A></li>
	<LI>Next message: <A HREF="000025.html">[Yade-commits] r1060 - in trunk: . yade-extra/clump	yade-libs/yade-lib-base/src/yade-lib-base
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/yade-commits">More information about the Yade-commits
mailing list</a><br>
</body></html>
