<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Yade-commits] r1236 - in trunk/pkg: common/Engine/StandAloneEngine	dem/Engine/DeusExMachina dem/PreProcessor
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/yade-commits/2007/index.html" >
   <LINK REL="made" HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1236%20-%20in%20trunk/pkg%3A%20common/Engine/StandAloneEngine%0A%09dem/Engine/DeusExMachina%20dem/PreProcessor&In-Reply-To=%3C200712101656.lBAGuES1021065%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000200.html">
   <LINK REL="Next"  HREF="000202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Yade-commits] r1236 - in trunk/pkg: common/Engine/StandAloneEngine	dem/Engine/DeusExMachina dem/PreProcessor</H1>
    <B>chareyre at BerliOS</B> 
    <A HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1236%20-%20in%20trunk/pkg%3A%20common/Engine/StandAloneEngine%0A%09dem/Engine/DeusExMachina%20dem/PreProcessor&In-Reply-To=%3C200712101656.lBAGuES1021065%40sheep.berlios.de%3E"
       TITLE="[Yade-commits] r1236 - in trunk/pkg: common/Engine/StandAloneEngine	dem/Engine/DeusExMachina dem/PreProcessor">chareyre at mail.berlios.de
       </A><BR>
    <I>Mon Dec 10 17:56:14 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000200.html">[Yade-commits] r1235 - in trunk: . extra/tetra gui/qt3
</A></li>
        <LI>Next message: <A HREF="000202.html">[Yade-commits] r1237 - in trunk: core gui/cmd gui/qt3	pkg/common/RenderingEngine/OpenGLRenderingEngine	pkg/dem/Engine/DeusExMachina pkg/dem/Engine/StandAloneEngine	pkg/dem/PreProcessor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#201">[ date ]</a>
              <a href="thread.html#201">[ thread ]</a>
              <a href="subject.html#201">[ subject ]</a>
              <a href="author.html#201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: chareyre
Date: 2007-12-10 17:56:13 +0100 (Mon, 10 Dec 2007)
New Revision: 1236

Modified:
   trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.cpp
   trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.hpp
   trunk/pkg/dem/Engine/DeusExMachina/TriaxialStateRecorder.hpp
   trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.cpp
   trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.hpp
   trunk/pkg/dem/PreProcessor/TriaxialTest.cpp
   trunk/pkg/dem/PreProcessor/TriaxialTest.hpp
Log:

Added some comments (doxygen friendly)  and corrected the author in some of the source files related to the triaxial test example. 



Modified: trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.cpp
===================================================================
--- trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.cpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.cpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -1,6 +1,6 @@
 /*************************************************************************
-*  Copyright (C) 2004 by Olivier Galizzi                                 *
-*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">olivier.galizzi at imag.fr</A>                                               *
+*  Copyright (C) 2007 by Bruno Chareyre                                  *
+*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">bruno.chareyre at hmg.inpg.fr</A>                                            *
 *                                                                        *
 *  This program is free software; it is licensed under the terms of the  *
 *  GNU General Public License v2 or later. See file LICENSE for details. *

Modified: trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.hpp
===================================================================
--- trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.hpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/common/Engine/StandAloneEngine/DistantPersistentSAPCollider.hpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -1,6 +1,6 @@
 /*************************************************************************
-*  Copyright (C) 2004 by Olivier Galizzi                                 *
-*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">olivier.galizzi at imag.fr</A>                                               *
+*  Copyright (C) 2007 by Bruno Chareyre                                  *
+*  <A HREF="https://lists.berlios.de/mailman/listinfo/yade-commits">bruno.chareyre at hmg.inpg.fr</A>                                            *
 *                                                                        *
 *  This program is free software; it is licensed under the terms of the  *
 *  GNU General Public License v2 or later. See file LICENSE for details. *

Modified: trunk/pkg/dem/Engine/DeusExMachina/TriaxialStateRecorder.hpp
===================================================================
--- trunk/pkg/dem/Engine/DeusExMachina/TriaxialStateRecorder.hpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/dem/Engine/DeusExMachina/TriaxialStateRecorder.hpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -14,6 +14,14 @@
 #include &lt;string&gt;
 #include &lt;fstream&gt;
 
+/*! \brief Record the stress-strain state of a sample in simulations using TriaxialCompressionEngine
+
+	The output is a text file where each line is a record, with the format 
+	IterationNumber sigma11 sigma22 sigma33 epsilon11 epsilon22 epsilon33
+	
+ */
+
+
 class PhysicalAction;
 class TriaxialCompressionEngine;
 

Modified: trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.cpp
===================================================================
--- trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.cpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.cpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -38,7 +38,7 @@
 	radiusControlInterval =10;
 	computeStressStrainInterval = 10;
 	wallDamping = 0.25;
-	force = Vector3r::ZERO;
+	//force = Vector3r::ZERO;
 	for (int i=0; i&lt;6; ++i)
 	{
 		wall_id[i] = 0;
@@ -104,7 +104,7 @@
 	REGISTER_ATTRIBUTE(radiusControlInterval);
 	REGISTER_ATTRIBUTE(computeStressStrainInterval);
 	REGISTER_ATTRIBUTE(wallDamping);
-	REGISTER_ATTRIBUTE(force);
+//	REGISTER_ATTRIBUTE(force);
 	
 	//REGISTER_ATTRIBUTE(UnbalancedForce);
 	

Modified: trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.hpp
===================================================================
--- trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.hpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/dem/Engine/DeusExMachina/TriaxialStressController.hpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -19,7 +19,7 @@
 class PhysicalParameters;
 
 
-/*! \brief Controls the stress on the boundaries of a box
+/*! \brief Controls the stress on the boundaries of a box and compute strain-like and stress-like quantities for the packing
 
 	detailed description...
 */
@@ -36,17 +36,20 @@
 		unsigned int stiffnessUpdateInterval, computeStressStrainInterval, radiusControlInterval;
 		//! internal index values for retrieving walls
 		int wall_bottom, wall_top, wall_left, wall_right, wall_front, wall_back;
+		//! real index values of walls in the MetaBody
+		int wall_id [6];
 		//! Defines the prescibed resultant force 
-		Vector3r		force;	
+		//Vector3r		force;	
 		//! Stores the value of the translation at the previous time step, stiffness, and normal
 		Vector3r	previousTranslation [6];
 		//! The value of stiffness (updated according to stiffnessUpdateInterval) 
 		Real		stiffness [6];
 		Real 		strain [3];
 		Vector3r	normal [6];
+		//! The values of stresses 
 		Vector3r	stress [6];
-		int 		wall_id [6];
 		Real		meanStress;
+				
 		
 		//Real UnbalancedForce;		
 				
@@ -71,6 +74,7 @@
 		virtual ~TriaxialStressController();
 	
 		virtual void applyCondition(Body*);
+		//! Regulate the stress applied on walls with flag wall_XXX_activated = true
 		void controlExternalStress(int wall, MetaBody* ncb, int id, Vector3r resultantForce, PhysicalParameters* p, Real wall_max_vel);
 		void controlInternalStress(MetaBody* ncb, Real multiplier);
 		void updateStiffness(MetaBody* ncb);

Modified: trunk/pkg/dem/PreProcessor/TriaxialTest.cpp
===================================================================
--- trunk/pkg/dem/PreProcessor/TriaxialTest.cpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/dem/PreProcessor/TriaxialTest.cpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -10,6 +10,9 @@
 *  GNU General Public License v2 or later. See file LICENSE for details. *
 *************************************************************************/
 
+
+
+
 #include &quot;TriaxialTest.hpp&quot;
 
 #include&lt;yade/pkg-dem/ElasticContactLaw.hpp&gt;

Modified: trunk/pkg/dem/PreProcessor/TriaxialTest.hpp
===================================================================
--- trunk/pkg/dem/PreProcessor/TriaxialTest.hpp	2007-10-23 14:02:00 UTC (rev 1235)
+++ trunk/pkg/dem/PreProcessor/TriaxialTest.hpp	2007-12-10 16:56:13 UTC (rev 1236)
@@ -26,7 +26,21 @@
 
 /*! \brief Isotropic compression + uniaxial compression test
 
-	detailed description...
+	This preprocessor is designed to :
+	1/ generate random loose packings and compress them under isotropic confining stress, either squeezing the packing between moving rigid boxes or expanding the particles while boxes are fixed (depending on flag &quot;InternalCompaction&quot;).
+	2/ simulate all sorts triaxial loading path (there is however a default loading path corresponding to constant lateral stress in 2 directions and constant strain rate on the third direction - this loading path is used when the flag AutoCompressionActivation = true, otherwise the simulation stops after isotropic compression)
+	
+	
+	Essential engines :
+	
+	1/ The TrixialCompressionEngine is used for controlling the state of the sample and simulating loading paths. TrixialCompressionEngine inherits from TriaxialStressController, which can compute stress- strain-like quantities in the packing and maintain a constant level of stress at each boundary. TriaxialCompressionEngine has few more members in order to impose constant strain rate and control the transition between isotropic compression and triaxial test.
+		
+	2/ The class TriaxialStateRecorder is used to write to a file the history of stresses and strains.
+	
+	3/ TriaxialTest is currently using a group of classes including GlobalStiffness (data), GlobalStiffnessCounter (updater) and GlobalStiffnessTimeStepper to compute an appropriate dt for the numerical scheme. The TriaxialTest is the only preprocessor using these classes in Yade because they have been developped AFTER most of preprocessor examples, BUT they can be used in principle in any situation and they have nothing specifically related to the triaxial test.
+	
+	@note TriaxialStressController::ComputeUnbalancedForce(...) returns a value that can be usefull for evaluating the stability of the packing. It is defined as (mean force on particles)/(mean contact force), so that it tends to 0 in a stable packing. This parameter is checked by TriaxialCompressionEngine to switch from one stage of the simulation to the next one (e.g. stop isotropic confinment and start axial loading)
+	
  */
 
 class TriaxialTest : public FileGenerator
@@ -76,6 +90,7 @@
 				,wall_2_wire
 				,wall_3_wire
 				,wall_4_wire
+				//! do we just want to generate a stable packing under isotropic pressure (false) or do we want the triaxial loading to start automatically right after compaction stage (true)?
 				,autoCompressionActivation
 				,bigBall
 				,rotationBlocked
@@ -83,6 +98,7 @@
 				,recordBottomForce
 				,recordAveragePositions
 				,boxWalls
+				//! flag for choosing between moving boundaries or increasing particles sizes during the compaction stage.
 				,internalCompaction
 				,saveAnimationSnapshots;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000200.html">[Yade-commits] r1235 - in trunk: . extra/tetra gui/qt3
</A></li>
	<LI>Next message: <A HREF="000202.html">[Yade-commits] r1237 - in trunk: core gui/cmd gui/qt3	pkg/common/RenderingEngine/OpenGLRenderingEngine	pkg/dem/Engine/DeusExMachina pkg/dem/Engine/StandAloneEngine	pkg/dem/PreProcessor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#201">[ date ]</a>
              <a href="thread.html#201">[ thread ]</a>
              <a href="subject.html#201">[ subject ]</a>
              <a href="author.html#201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/yade-commits">More information about the Yade-commits
mailing list</a><br>
</body></html>
