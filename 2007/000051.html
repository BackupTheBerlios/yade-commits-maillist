<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Yade-commits] r1086 - in trunk: . yade-extra/clump yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator yade-guis/yade-gui-qt/src/QtGUI yade-libs/yade-lib-multimethods/src/yade-lib-multimethods yade-libs/yade-lib-serialization/src/yade-lib-serialization yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry yade-packages/yade-pack! age-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships yade-packages/yade-package-dem/src/PreProcessor/Funnel yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness yade-packages/yade-package-fem/src/PreProcessor/FEMBeam yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox! 2InteractingSphere4ClosestFeatures yade-packages/yade-package-! realtime
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/yade-commits/2007/index.html" >
   <LINK REL="made" HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1086%20-%20in%20trunk%3A%20.%20yade-extra/clump%0A%20yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator%0A%20yade-guis/yade-gui-qt/src/QtGUI%0A%20yade-libs/yade-lib-multimethods/src/yade-lib-multimethods%0A%20yade-libs/yade-lib-serialization/src/yade-lib-serialization%0A%20yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin%0A%20yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml%0A%20yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry%0A%20yade-packages/yade-pack%21%0A%20age-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships%0A%20yade-packages/yade-package-dem/src/PreProcessor/Funnel%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane%0A%20yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest%0A%20yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending%0A%20yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest%0A%20yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader%0A%20yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness%0A%20yade-packages/yade-package-fem/src/PreProcessor/FEMBeam%0A%20yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample%0A%20yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth%0A%20yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox%21%0A%202InteractingSphere4ClosestFeatures%20yade-packages/yade-package-%21%20realtime&In-Reply-To=%3C200703070827.l278RqtS010365%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000050.html">
   <LINK REL="Next"  HREF="000052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Yade-commits] r1086 - in trunk: . yade-extra/clump yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator yade-guis/yade-gui-qt/src/QtGUI yade-libs/yade-lib-multimethods/src/yade-lib-multimethods yade-libs/yade-lib-serialization/src/yade-lib-serialization yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry yade-packages/yade-pack! age-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships yade-packages/yade-package-dem/src/PreProcessor/Funnel yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness yade-packages/yade-package-fem/src/PreProcessor/FEMBeam yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox! 2InteractingSphere4ClosestFeatures yade-packages/yade-package-! realtime</H1>
    <B>eudoxos at BerliOS</B> 
    <A HREF="mailto:yade-commits%40lists.berlios.de?Subject=Re%3A%20%5BYade-commits%5D%20r1086%20-%20in%20trunk%3A%20.%20yade-extra/clump%0A%20yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator%0A%20yade-guis/yade-gui-qt/src/QtGUI%0A%20yade-libs/yade-lib-multimethods/src/yade-lib-multimethods%0A%20yade-libs/yade-lib-serialization/src/yade-lib-serialization%0A%20yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin%0A%20yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml%0A%20yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron%0A%20yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry%0A%20yade-packages/yade-pack%21%0A%20age-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships%0A%20yade-packages/yade-package-dem/src/PreProcessor/Funnel%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall%0A%20yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane%0A%20yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest%0A%20yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending%0A%20yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest%0A%20yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader%0A%20yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness%0A%20yade-packages/yade-package-fem/src/PreProcessor/FEMBeam%0A%20yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample%0A%20yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth%0A%20yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox%21%0A%202InteractingSphere4ClosestFeatures%20yade-packages/yade-package-%21%20realtime&In-Reply-To=%3C200703070827.l278RqtS010365%40sheep.berlios.de%3E"
       TITLE="[Yade-commits] r1086 - in trunk: . yade-extra/clump yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator yade-guis/yade-gui-qt/src/QtGUI yade-libs/yade-lib-multimethods/src/yade-lib-multimethods yade-libs/yade-lib-serialization/src/yade-lib-serialization yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry yade-packages/yade-pack! age-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships yade-packages/yade-package-dem/src/PreProcessor/Funnel yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness yade-packages/yade-package-fem/src/PreProcessor/FEMBeam yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox! 2InteractingSphere4ClosestFeatures yade-packages/yade-package-! realtime">eudoxos at mail.berlios.de
       </A><BR>
    <I>Wed Mar  7 09:27:52 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000050.html">[Yade-commits] r1085 - in trunk: . yade-extra/clump yade-packages/yade-package-common/src/Engine/DeusExMachina/ForceEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/GravityEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/RotationEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/TranslationEngine yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogOrientationIntegrator yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogPositionIntegrator yade-packages/yade-package-common/src/Engine/EngineUnit/MetaInteractingGeometry2AABB yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsForceLaw yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsMomentumLaw yade-packages/yade-package-common/src/Engine/MetaEngine/BoundingVolumeMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/GeometricalModelMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/InteractingGeometryMetaEngi! ne yade-packages/yade-package-common/src/Engine/MetaEngine/InteractionGeometryMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/InteractionPhysicsMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalActionApplier yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalActionDamper yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalParametersMetaEngine yade-packages/yade-package-common/src/Engine/StandAloneEngine/PersistentSAPCollider yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerReseter yade-packages/yade-package-common/src/Engine/StandAloneEngine/SAPCollider yade-packages/yade-package-dem/src/Engine/DeusExMachina/ResultantForceEngine yade-packages/yade-package-dem/src/Engine/DeusExMachina/TriaxialStressController yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElast! icRelationships yade-packages/yade-package-dem/src/Engine/Engi! neUnit/S
</A></li>
        <LI>Next message: <A HREF="000052.html">[Yade-commits] r1087 - trunk/yade-doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: eudoxos
Date: 2007-03-07 09:27:48 +0100 (Wed, 07 Mar 2007)
New Revision: 1086

Modified:
   trunk/SConstruct
   trunk/yade-extra/clump/Clump.cpp
   trunk/yade-extra/clump/Shop.cpp
   trunk/yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator/SphericalDEMSimulator.cpp
   trunk/yade-guis/yade-gui-qt/src/QtGUI/GLEngineEditor.cpp
   trunk/yade-libs/yade-lib-multimethods/src/yade-lib-multimethods/DynLibDispatcher.hpp
   trunk/yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin/BINFormatManager.cpp
   trunk/yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml/XMLFormatManager.cpp
   trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/Archive.cpp
   trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.cpp
   trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.tpp
   trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/PointerHandler.tpp
   trunk/yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer/PhysicalActionContainerInitializer.cpp
   trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry/InteractingBox2InteractingSphere4SpheresContactGeometry.cpp
   trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron.cpp
   trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron.cpp
   trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry/InteractingSphere2InteractingSphere4SpheresContactGeometry.cpp
   trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships/MacroMicroElasticRelationships.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/Funnel/Funnel.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest/SDECImpactTest.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres/SDECLinkedSpheres.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall/SDECMovingWall.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane/SDECSpheresPlane.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest/TetrahedronsTest.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp
   trunk/yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest/TriaxialTest.cpp
   trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader/FEMSetTextLoader.cpp
   trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness/FEMTetrahedronStiffness.cpp
   trunk/yade-packages/yade-package-fem/src/PreProcessor/FEMBeam/FEMBeam.cpp
   trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp
   trunk/yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth/HangingCloth.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox2InteractingSphere4ClosestFeatures/AAInteractingBox2InteractingSphere4ClosestFeatures.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ClosestFeatures/InteractingBox2InteractingSphere4ClosestFeatures.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ErrorTolerantContact/InteractingBox2InteractingSphere4ErrorTolerantContact.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ClosestFeatures/InteractingSphere2InteractingSphere4ClosestFeatures.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ErrorTolerantContact/InteractingSphere2InteractingSphere4ErrorTolerantContact.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/ErrorTolerantLaw/ErrorTolerantLaw.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/FrictionLessElasticContactLaw/FrictionLessElasticContactLaw.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/BoxStack/BoxStack.cpp
   trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/RotatingBox/RotatingBox.cpp
Log:
dynamic_pointer_cast replaced by YADE_PTR_CAST as appropriate. It must be defined on compiler command-line (-DYADE_PTR_CAST=dynamic_pointer_cast or -DYADE_PTR_CAST=static_pointer_cast). Scons builds get this automatically.


Modified: trunk/SConstruct
===================================================================
--- trunk/SConstruct	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/SConstruct	2007-03-07 08:27:48 UTC (rev 1086)
@@ -226,7 +226,7 @@
 else: env.Append(CXXFLAGS='-O2')
 if env['optimize']:
 	env.Append(CXXFLAGS=Split('-O3 -ffast-math'))
-	env.Append(CPPDEFINES=[('YADE_CAST','static_cast')])
+	env.Append(CPPDEFINES=[('YADE_CAST','static_cast'),('YADE_PTR_CAST','static_pointer_cast')])
 	# -floop-optimize2 is a gcc-4.x flag, doesn't exist on previous version
 	# CRASH -ffloat-store
 	# maybe not CRASH?: -fno-math-errno
@@ -239,7 +239,7 @@
 	archFlags=Split('-march=pentium4 -mfpmath=sse,387') #-malign-double')
 	env.Append(CXXFLAGS=archFlags,LINKFLAGS=archFlags,SHLINKFLAGS=archFlags)
 else:
-	env.Append(CPPDEFINES=[('YADE_CAST','dynamic_cast')])
+	env.Append(CPPDEFINES=[('YADE_CAST','dynamic_cast'),('YADE_PTR_CAST','dynamic_pointer_cast')])
 
 if env['profile']: env.Append(CXXFLAGS=['-pg'],LINKFLAGS=['-pg'],SHLINKFLAGS=['-pg'])
 env.Append(CXXFLAGS=['-pipe','-Wall'])

Modified: trunk/yade-extra/clump/Clump.cpp
===================================================================
--- trunk/yade-extra/clump/Clump.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-extra/clump/Clump.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -29,10 +29,9 @@
 	MetaBody* rootBody = YADE_CAST&lt;MetaBody*&gt;(_rootBody);
 	for(BodyContainer::iterator I=rootBody-&gt;bodies-&gt;begin(); I!=rootBody-&gt;bodies-&gt;end(); ++I){
 		shared_ptr&lt;Body&gt; b = *I;
-		// is this a clump?
-		if(b-&gt;getId()==b-&gt;clumpId){
+		if(b-&gt;isClump()){
 			//LOG_TRACE(&quot;Applying movement to clump #&quot;&lt;&lt;b-&gt;getId());
-			dynamic_pointer_cast&lt;Clump&gt;(b)-&gt;moveMembers();
+			static_cast&lt;Clump*&gt;(b.get())-&gt;moveMembers();
 		}
 	}
 	//if(!clump-&gt;isDynamic) return; // perhaps clump that has been desactivated?!
@@ -107,11 +106,11 @@
  */
 void Clump::moveMembers(){
 	const Se3r&amp; mySe3(physicalParameters-&gt;se3);
-	const shared_ptr&lt;RigidBodyParameters&gt;&amp; myRBP(dynamic_pointer_cast&lt;RigidBodyParameters&gt;(physicalParameters));
+	const shared_ptr&lt;RigidBodyParameters&gt;&amp; myRBP=static_pointer_cast&lt;RigidBodyParameters&gt;(physicalParameters);
 	for(Clump::memberMap::iterator I=members.begin(); I!=members.end(); I++){
 		// now, I-&gt;first is Body::id_t, I-&gt;second is Se3r of that body in the clump
-		shared_ptr&lt;Body&gt; subBody=Body::byId(I-&gt;first);
-		shared_ptr&lt;RigidBodyParameters&gt; subRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters);
+		shared_ptr&lt;Body&gt; member=Body::byId(I-&gt;first);
+		const shared_ptr&lt;RigidBodyParameters&gt;&amp; subRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(member-&gt;physicalParameters));
 		//LOG_TRACE(&quot;Old #&quot;&lt;&lt;I-&gt;first&lt;&lt;&quot;position: &quot;&lt;&lt;subRBP-&gt;se3.position);
 		subRBP-&gt;se3.position=mySe3.position+mySe3.orientation*I-&gt;second.position;
 		subRBP-&gt;se3.orientation=mySe3.orientation*I-&gt;second.orientation;
@@ -125,7 +124,7 @@
 	/* @bug Temporarily we reset acceleration and angularAcceleration of the clump here;
 	 * should be a new negine that will take care of that?
 	 */
-	shared_ptr&lt;RigidBodyParameters&gt; clumpRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(physicalParameters);
+	const shared_ptr&lt;RigidBodyParameters&gt;&amp; clumpRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(physicalParameters));
 	#if 0
 		if(Omega::instance().getCurrentIteration()%50==0){
 			Real Erot=.5*clumpRBP-&gt;inertia[0]*pow(clumpRBP-&gt;angularVelocity[0],2)+.5*clumpRBP-&gt;inertia[1]*pow(clumpRBP-&gt;angularVelocity[1],2)+.5*clumpRBP-&gt;inertia[2]*pow(clumpRBP-&gt;angularVelocity[2],2);
@@ -185,13 +184,13 @@
 	Vector3r Sg(0,0,0); // static moment
 	Matrix3r Ig(true /* fill with zeros */ ), Ic(true); // tensors of inertia; is upper triangular, zeros instead of symmetric elements
 	Se3r&amp; mySe3(physicalParameters-&gt;se3);
-	const shared_ptr&lt;RigidBodyParameters&gt;&amp; clumpRBP(dynamic_pointer_cast&lt;RigidBodyParameters&gt;(physicalParameters));
+	const shared_ptr&lt;RigidBodyParameters&gt;&amp; clumpRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(physicalParameters));
 
 	if(members.size()==1){
 		LOG_DEBUG(&quot;Clump of size one will be treated specially.&quot;)
 		memberMap::iterator I=members.begin();
 		shared_ptr&lt;Body&gt; subBody=Body::byId(I-&gt;first);
-		shared_ptr&lt;RigidBodyParameters&gt; subRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters);
+		const shared_ptr&lt;RigidBodyParameters&gt;&amp; subRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters));
 		mySe3.position=subRBP-&gt;se3.position;
 		mySe3.orientation=subRBP-&gt;se3.orientation;
 		clumpRBP-&gt;inertia=subRBP-&gt;inertia;
@@ -210,7 +209,7 @@
 		for(memberMap::iterator I=members.begin(); I!=members.end(); I++){
 			// now, I-&gt;first is Body::id_t, I-&gt;second is Se3r of that body
 			shared_ptr&lt;Body&gt; subBody=Body::byId(I-&gt;first);
-			shared_ptr&lt;RigidBodyParameters&gt; subRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters);
+			const shared_ptr&lt;RigidBodyParameters&gt;&amp; subRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters));
 			M+=subRBP-&gt;mass;
 			Sg+=subRBP-&gt;mass*subRBP-&gt;se3.position;
 			// transform from local to global coords
@@ -259,7 +258,7 @@
 			//!!!!! note that this is HIGHLY incorrect for all non-single clumps !!!!!
 			memberMap::iterator I=members.begin();
 			shared_ptr&lt;Body&gt; subBody=Body::byId(I-&gt;first);
-			shared_ptr&lt;RigidBodyParameters&gt; subRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters);
+			const shared_ptr&lt;RigidBodyParameters&gt;&amp; subRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters));
 			clumpRBP-&gt;inertia=subRBP-&gt;inertia*10.; // 10 is arbitrary; just to have inertia of clump bigger
 			// orientation of the clump is broken as well, since is result of EigenDecomposition as well (rotation matrix)
 			mySe3.orientation.FromRotationMatrix(Matrix3r(1,0,0,0,1,0,0,0,1));
@@ -276,7 +275,7 @@
 	for(memberMap::iterator I=members.begin(); I!=members.end(); I++){
 		// now, I-&gt;first is Body::id_t, I-&gt;second is Se3r of that body
 		shared_ptr&lt;Body&gt; subBody=Body::byId(I-&gt;first);
-		shared_ptr&lt;RigidBodyParameters&gt; subRBP=dynamic_pointer_cast&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters);
+		const shared_ptr&lt;RigidBodyParameters&gt;&amp; subRBP(YADE_PTR_CAST&lt;RigidBodyParameters&gt;(subBody-&gt;physicalParameters));
 		I-&gt;second.orientation=mySe3.orientation.Conjugate()*subRBP-&gt;se3.orientation;
 		I-&gt;second.position=mySe3.orientation.Conjugate()*(subRBP-&gt;se3.position-mySe3.position);
 	}
@@ -414,7 +413,7 @@
 	
 	// empty clump	
 	shared_ptr&lt;Clump&gt; clump=shared_ptr&lt;Clump&gt;(new Clump());
-	shared_ptr&lt;Body&gt; clumpAsBody=dynamic_pointer_cast&lt;Body&gt;(clump);
+	shared_ptr&lt;Body&gt; clumpAsBody(static_pointer_cast&lt;Body&gt;(clump));
 	rootBody-&gt;bodies-&gt;insert(clumpAsBody);
 
 	clump-&gt;isDynamic=true;

Modified: trunk/yade-extra/clump/Shop.cpp
===================================================================
--- trunk/yade-extra/clump/Shop.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-extra/clump/Shop.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -134,10 +134,10 @@
 	rootBody-&gt;physicalParameters=physics;
 
 	shared_ptr&lt;MetaInteractingGeometry&gt; set(new MetaInteractingGeometry());	set-&gt;diffuseColor=Vector3r(0,0,1);
-	rootBody-&gt;interactingGeometry=dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;interactingGeometry=YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
 	
 	shared_ptr&lt;AABB&gt; aabb(new AABB); aabb-&gt;diffuseColor=Vector3r(0,0,1);
-	rootBody-&gt;boundingVolume=dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;boundingVolume=YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	
 	rootBody-&gt;persistentInteractions=shared_ptr&lt;InteractionContainer&gt;(new InteractionVecSet);
 	rootBody-&gt;transientInteractions=shared_ptr&lt;InteractionContainer&gt;(new InteractionVecSet);

Modified: trunk/yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator/SphericalDEMSimulator.cpp
===================================================================
--- trunk/yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator/SphericalDEMSimulator.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-extra/yade-spherical-dem-simulator/src/SphericalDEMSimulator/SphericalDEMSimulator.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -196,7 +196,7 @@
 		shared_ptr&lt;InteractionPhysicsMetaEngine&gt; ipme = dynamic_pointer_cast&lt;InteractionPhysicsMetaEngine&gt;(e);
 		if (ipme)
 		{
-			shared_ptr&lt;MacroMicroElasticRelationships&gt; mmer = dynamic_pointer_cast&lt;MacroMicroElasticRelationships&gt;(ipme-&gt;getExecutor(&quot;BodyMacroParameters&quot;,&quot;BodyMacroParameters&quot;));
+			shared_ptr&lt;MacroMicroElasticRelationships&gt; mmer = YADE_PTR_CAST&lt;MacroMicroElasticRelationships&gt;(ipme-&gt;getExecutor(&quot;BodyMacroParameters&quot;,&quot;BodyMacroParameters&quot;));
 			assert(e);
 			alpha	= mmer-&gt;alpha;
 			beta	= mmer-&gt;beta;
@@ -206,8 +206,8 @@
 		shared_ptr&lt;PhysicalActionDamper&gt; pade = dynamic_pointer_cast&lt;PhysicalActionDamper&gt;(e);
 		if (pade)
 		{	
-			shared_ptr&lt;CundallNonViscousForceDamping&gt; cnvfd = dynamic_pointer_cast&lt;CundallNonViscousForceDamping&gt;(pade-&gt;getExecutor(&quot;Force&quot;,&quot;RigidBodyParameters&quot;));
-			shared_ptr&lt;CundallNonViscousMomentumDamping&gt; cnvmd = dynamic_pointer_cast&lt;CundallNonViscousMomentumDamping&gt;(pade-&gt;getExecutor(&quot;Momentum&quot;,&quot;RigidBodyParameters&quot;));
+			shared_ptr&lt;CundallNonViscousForceDamping&gt; cnvfd = YADE_PTR_CAST&lt;CundallNonViscousForceDamping&gt;(pade-&gt;getExecutor(&quot;Force&quot;,&quot;RigidBodyParameters&quot;));
+			shared_ptr&lt;CundallNonViscousMomentumDamping&gt; cnvmd = YADE_PTR_CAST&lt;CundallNonViscousMomentumDamping&gt;(pade-&gt;getExecutor(&quot;Momentum&quot;,&quot;RigidBodyParameters&quot;));
 			assert(cnvfd);
 			assert(cnvmd);
 			forceDamping 	= cnvfd-&gt;damping;

Modified: trunk/yade-guis/yade-gui-qt/src/QtGUI/GLEngineEditor.cpp
===================================================================
--- trunk/yade-guis/yade-gui-qt/src/QtGUI/GLEngineEditor.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-guis/yade-gui-qt/src/QtGUI/GLEngineEditor.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -291,7 +291,7 @@
 
 void GLEngineEditor::updateLabel(int i)
 {
-	shared_ptr&lt;GLTextLabel&gt; tl = dynamic_pointer_cast&lt;GLTextLabel&gt;(wm.getWindow(i));
+	shared_ptr&lt;GLTextLabel&gt; tl = YADE_PTR_CAST&lt;GLTextLabel&gt;(wm.getWindow(i));
 	//tl-&gt;setText(data-&gt;fracProperties[i]-&gt;name);
 	//tl-&gt;setBorderColor(data-&gt;fractures[i]-&gt;color[0],data-&gt;fractures[i]-&gt;color[1],data-&gt;fractures[i]-&gt;color[2]);
 	tl-&gt;fitTextSize();

Modified: trunk/yade-libs/yade-lib-multimethods/src/yade-lib-multimethods/DynLibDispatcher.hpp
===================================================================
--- trunk/yade-libs/yade-lib-multimethods/src/yade-lib-multimethods/DynLibDispatcher.hpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-multimethods/src/yade-lib-multimethods/DynLibDispatcher.hpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -188,14 +188,14 @@
  	public  : shared_ptr&lt;Executor&gt; getExecutor(const string&amp; baseClassName1,const string&amp; baseClassName2)
 		  {
 
-			shared_ptr&lt;BaseClass1&gt; baseClass1 = dynamic_pointer_cast&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName1));
-			shared_ptr&lt;Indexable&gt; base1	  = dynamic_pointer_cast&lt;Indexable&gt;(baseClass1);
+			shared_ptr&lt;BaseClass1&gt; baseClass1 = YADE_PTR_CAST&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName1));
+			shared_ptr&lt;Indexable&gt; base1	  = YADE_PTR_CAST&lt;Indexable&gt;(baseClass1);
 			assert(base1);
 			int&amp; index1 = base1-&gt;getClassIndex();
  			assert (index1 != -1);
 
-			shared_ptr&lt;BaseClass2&gt; baseClass2 = dynamic_pointer_cast&lt;BaseClass2&gt;(ClassFactory::instance().createShared(baseClassName2));
-			shared_ptr&lt;Indexable&gt; base2	  = dynamic_pointer_cast&lt;Indexable&gt;(baseClass2);
+			shared_ptr&lt;BaseClass2&gt; baseClass2 = YADE_PTR_CAST&lt;BaseClass2&gt;(ClassFactory::instance().createShared(baseClassName2));
+			shared_ptr&lt;Indexable&gt; base2	  = YADE_PTR_CAST&lt;Indexable&gt;(baseClass2);
 			assert(base2);
 			int&amp; index2 = base2-&gt;getClassIndex();
  			assert (index2 != -1);
@@ -209,8 +209,8 @@
  	public  : shared_ptr&lt;Executor&gt; getExecutor(const string&amp; baseClassName)
 		  {
 
-			shared_ptr&lt;BaseClass1&gt; baseClass = dynamic_pointer_cast&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName));
-			shared_ptr&lt;Indexable&gt; base	  = dynamic_pointer_cast&lt;Indexable&gt;(baseClass);
+			shared_ptr&lt;BaseClass1&gt; baseClass = YADE_PTR_CAST&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName));
+			shared_ptr&lt;Indexable&gt; base	  = YADE_PTR_CAST&lt;Indexable&gt;(baseClass);
 			assert(base);
 			int&amp; index = base-&gt;getClassIndex();
  			assert (index != -1);
@@ -294,9 +294,9 @@
 			// the class might not exist in memory at all, and we have to load dynamic library,
 			// so that a static variable is created and accessible)
 			shared_ptr&lt;BaseClass1&gt; baseClass = 
-				dynamic_pointer_cast&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName));
+				YADE_PTR_CAST&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName));
 			// this is a strange tweak without which it won't work.
-			shared_ptr&lt;Indexable&gt; base = dynamic_pointer_cast&lt;Indexable&gt;(baseClass);
+			shared_ptr&lt;Indexable&gt; base = YADE_PTR_CAST&lt;Indexable&gt;(baseClass);
 		
 			assert(base);
 			int&amp; index = base-&gt;getClassIndex();
@@ -373,10 +373,10 @@
 		
 	public  : void add2DEntry( string baseClassName1, string baseClassName2, string libName, shared_ptr&lt;Executor&gt; ex = shared_ptr&lt;Executor&gt;())
 		  {
-			shared_ptr&lt;BaseClass1&gt; baseClass1 = dynamic_pointer_cast&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName1));
-			shared_ptr&lt;BaseClass2&gt; baseClass2 = dynamic_pointer_cast&lt;BaseClass2&gt;(ClassFactory::instance().createShared(baseClassName2));
-			shared_ptr&lt;Indexable&gt; base1 = dynamic_pointer_cast&lt;Indexable&gt;(baseClass1);
-			shared_ptr&lt;Indexable&gt; base2 = dynamic_pointer_cast&lt;Indexable&gt;(baseClass2);
+			shared_ptr&lt;BaseClass1&gt; baseClass1 = YADE_PTR_CAST&lt;BaseClass1&gt;(ClassFactory::instance().createShared(baseClassName1));
+			shared_ptr&lt;BaseClass2&gt; baseClass2 = YADE_PTR_CAST&lt;BaseClass2&gt;(ClassFactory::instance().createShared(baseClassName2));
+			shared_ptr&lt;Indexable&gt; base1 = YADE_PTR_CAST&lt;Indexable&gt;(baseClass1);
+			shared_ptr&lt;Indexable&gt; base2 = YADE_PTR_CAST&lt;Indexable&gt;(baseClass2);
 			
 			assert(base1);
 			assert(base2);

Modified: trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/Archive.cpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/Archive.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/Archive.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -41,7 +41,7 @@
 		}
 		else if (recordType==SerializableTypes::CUSTOM_CLASS)
 		{
-			shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(getSerializableClassName()));
+			shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(getSerializableClassName()));
 			s-&gt;registerAttributes();
 			bool result = s-&gt;containsOnlyFundamentals();
 			s-&gt;archives.clear();

Modified: trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.cpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -153,7 +153,7 @@
 
 void IOFormatManager::deserializeCustomClass(istream&amp; stream, Archive&amp; ac, const string&amp; str)
 {
-	shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 
 	shared_ptr&lt;Archive&gt; tmpAc = Archive::create(ac.getName(),*s);
 	tmpAc-&gt;deserialize(stream, *tmpAc, str);
@@ -164,7 +164,7 @@
 
 void IOFormatManager::serializeCustomClass(ostream&amp; stream, Archive&amp; ac,int depth)
 {
-	shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 	s-&gt;serialize(ac.getAddress());
 	shared_ptr&lt;Archive&gt; tmpAc = Archive::create(ac.getName(),*s);
 	tmpAc-&gt;serialize(stream,*tmpAc,depth);
@@ -204,7 +204,7 @@
 // or better provide a regexp
 void IOFormatManager::deserializeCustomFundamental(istream&amp; stream, Archive&amp; ac,const string&amp; str)
 {
-	shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 
 	s-&gt;registerSerializableAttributes(true);
 
@@ -226,7 +226,7 @@
 
 void IOFormatManager::serializeCustomFundamental(ostream&amp; stream, Archive&amp; ac,int depth)
 {
-	shared_ptr&lt;Serializable&gt; ss = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; ss = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 	ss-&gt;serialize(ac.getAddress());
 	ss-&gt;registerSerializableAttributes(false);
 	Serializable::Archives archives = ss-&gt;getArchives();

Modified: trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.tpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.tpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/IOFormatManager.tpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -23,7 +23,7 @@
 		throw SerializableError(IOManagerExceptions::FileNotGood);
 
 	shared_ptr&lt;IOFormatManager&gt; ioManager;
-	ioManager = dynamic_pointer_cast&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
+	ioManager = YADE_PTR_CAST&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
 
 	shared_ptr&lt;Archive&gt; ac = Archive::create(name,t);
 	string str = ioManager-&gt;beginDeserialization(filei,*ac);
@@ -57,7 +57,7 @@
 void IOFormatManager::loadArchive(const string&amp; libName, istream&amp; stream, Type&amp; t, const string&amp; name)
 {
 	shared_ptr&lt;IOFormatManager&gt; ioManager;
-	ioManager = dynamic_pointer_cast&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
+	ioManager = YADE_PTR_CAST&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
 
 	shared_ptr&lt;Archive&gt; ac = Archive::create(name,t);
 	string str = ioManager-&gt;beginDeserialization(stream,*ac);
@@ -70,7 +70,7 @@
 void IOFormatManager::saveArchive(const string&amp; libName, ostream&amp; stream, Type&amp; t, const string&amp; name)
 {
 	shared_ptr&lt;IOFormatManager&gt; ioManager;
-	ioManager = dynamic_pointer_cast&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
+	ioManager = YADE_PTR_CAST&lt;IOFormatManager&gt;(ClassFactory::instance().createShared(libName));
 
 	shared_ptr&lt;Archive&gt; ac = Archive::create(name,t);
 	ioManager-&gt;beginSerialization(stream, *ac);

Modified: trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/PointerHandler.tpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/PointerHandler.tpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization/src/yade-lib-serialization/PointerHandler.tpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -56,9 +56,9 @@
 				// proper solution is to write template specialization for PointerHandler&lt; int &gt;
 				// if you need it - then write it.
 
-//				shared_ptr&lt;Serializable&gt; newInstance = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(typeStr));
+//				shared_ptr&lt;Serializable&gt; newInstance = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(typeStr));
 //				tmpPtr		= any_cast&lt; shared_ptr&lt;PointedType&gt;* &gt;(ac.getAddress());	
-//				*tmpPtr 	= dynamic_pointer_cast&lt;PointedType&gt;(newInstance);
+//				*tmpPtr 	= YADE_PTR_CAST&lt;PointedType&gt;(newInstance);
 //				newAc 		= Archive::create(name,**tmpPtr);
 
 // original h4x00r lines .....

Modified: trunk/yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin/BINFormatManager.cpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin/BINFormatManager.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization-bin/src/yade-lib-serialization-bin/BINFormatManager.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -339,7 +339,7 @@
 
 void BINFormatManager::deserializeCustomFundamental(istream&amp; stream, Archive&amp; ac,const string&amp; str)
 {
-	shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 
 	s-&gt;registerSerializableAttributes(true);
 
@@ -357,7 +357,7 @@
 
 void BINFormatManager::serializeCustomFundamental(ostream&amp; stream, Archive&amp; ac,int depth)
 {
-	shared_ptr&lt;Serializable&gt; ss = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
+	shared_ptr&lt;Serializable&gt; ss = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(ac.getSerializableClassName()));
 	ss-&gt;serialize(ac.getAddress());
 	ss-&gt;registerSerializableAttributes(false);
 	Serializable::Archives archives = ss-&gt;getArchives();

Modified: trunk/yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml/XMLFormatManager.cpp
===================================================================
--- trunk/yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml/XMLFormatManager.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-libs/yade-lib-serialization-xml/src/yade-lib-serialization-xml/XMLFormatManager.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -279,7 +279,7 @@
 		}
 		else if (type==SerializableTypes::CUSTOM_CLASS)
 		{
-			shared_ptr&lt;Serializable&gt; s = dynamic_pointer_cast&lt;Serializable&gt;(ClassFactory::instance().createShared(tmpAc-&gt;getSerializableClassName()));
+			shared_ptr&lt;Serializable&gt; s = YADE_PTR_CAST&lt;Serializable&gt;(ClassFactory::instance().createShared(tmpAc-&gt;getSerializableClassName()));
 			stream &lt;&lt; &quot; _className_=\&quot;&quot; &lt;&lt; s-&gt;getClassName() &lt;&lt; &quot;\&quot; &quot;;//&gt;&quot; &lt;&lt; endl;
 			tmpAc-&gt;serialize(stream, *tmpAc, depth+1);
 		}

Modified: trunk/yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer/PhysicalActionContainerInitializer.cpp
===================================================================
--- trunk/yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer/PhysicalActionContainerInitializer.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer/PhysicalActionContainerInitializer.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -35,7 +35,7 @@
 	
 	for(unsigned int i = 0 ; i &lt; physicalActionNames.size() ; ++i )
 		physicalActions.push_back(
-			dynamic_pointer_cast&lt;PhysicalAction&gt;
+			YADE_PTR_CAST&lt;PhysicalAction&gt;
 				(ClassFactory::instance().createShared(physicalActionNames[i]))
 		);
 	

Modified: trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry/InteractingBox2InteractingSphere4SpheresContactGeometry.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry/InteractingBox2InteractingSphere4SpheresContactGeometry.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingBox2InteractingSphere4SpheresContactGeometry/InteractingBox2InteractingSphere4SpheresContactGeometry.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -86,7 +86,7 @@
 		if (c-&gt;isNew)
 			scm = shared_ptr&lt;SpheresContactGeometry&gt;(new SpheresContactGeometry());
 		else
-			scm = dynamic_pointer_cast&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);
+			scm = YADE_PTR_CAST&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);
 			
 		scm-&gt;contactPoint = 0.5*(pt1+pt2);
 		scm-&gt;normal = pt1-pt2;
@@ -129,7 +129,7 @@
 	if (c-&gt;isNew)
 		scm = shared_ptr&lt;SpheresContactGeometry&gt;(new SpheresContactGeometry());
 	else
-		scm = dynamic_pointer_cast&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);	
+		scm = YADE_PTR_CAST&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);	
 	scm-&gt;contactPoint = 0.5*(pt1+pt2);
 	scm-&gt;normal = pt1-pt2;
 	scm-&gt;penetrationDepth = scm-&gt;normal.Normalize();

Modified: trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingBox4InteractionOfMyTetrahedron.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -78,7 +78,7 @@
 	if (c-&gt;isNew)
 		imt = shared_ptr&lt;InteractionOfMyTetrahedron&gt;(new InteractionOfMyTetrahedron());
 	else
-		imt = dynamic_pointer_cast&lt;InteractionOfMyTetrahedron&gt;(c-&gt;interactionGeometry);	
+		imt = YADE_PTR_CAST&lt;InteractionOfMyTetrahedron&gt;(c-&gt;interactionGeometry);	
 
 
 

Modified: trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron/InteractingMyTetrahedron2InteractingMyTetrahedron4InteractionOfMyTetrahedron.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -39,7 +39,7 @@
 	if (c-&gt;isNew)
 		imt = shared_ptr&lt;InteractionOfMyTetrahedron&gt;(new InteractionOfMyTetrahedron());
 	else
-		imt = dynamic_pointer_cast&lt;InteractionOfMyTetrahedron&gt;(c-&gt;interactionGeometry);	
+		imt = YADE_PTR_CAST&lt;InteractionOfMyTetrahedron&gt;(c-&gt;interactionGeometry);	
 
 	bool isInteracting = false;
 	for(int i=0 ; i&lt;4 ; ++i )

Modified: trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry/InteractingSphere2InteractingSphere4SpheresContactGeometry.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry/InteractingSphere2InteractingSphere4SpheresContactGeometry.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4SpheresContactGeometry/InteractingSphere2InteractingSphere4SpheresContactGeometry.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -42,7 +42,7 @@
 	shared_ptr&lt;SpheresContactGeometry&gt; scm;
 	if (c-&gt;interactionGeometry)
 	{
-		//scm = dynamic_pointer_cast&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);
+		//scm = YADE_PTR_CAST&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);
 		scm = static_pointer_cast&lt;SpheresContactGeometry&gt;(c-&gt;interactionGeometry);
 	// BEGIN .......  FIXME FIXME	- wrong hack, to make cohesion work.
 		if(! scm) // this is not SpheresContactGeometry, so it is SDECLinkGeometry, dispatcher should do this job.

Modified: trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships/MacroMicroElasticRelationships.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships/MacroMicroElasticRelationships.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElasticRelationships/MacroMicroElasticRelationships.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -53,7 +53,7 @@
 		if ( interaction-&gt;isNew)
 		{
 			interaction-&gt;interactionPhysics = shared_ptr&lt;ElasticContactInteraction&gt;(new ElasticContactInteraction());
-			contactPhysics = dynamic_pointer_cast&lt;ElasticContactInteraction&gt;(interaction-&gt;interactionPhysics);
+			contactPhysics = YADE_PTR_CAST&lt;ElasticContactInteraction&gt;(interaction-&gt;interactionPhysics);
 			
 			contactPhysics-&gt;initialKn			= 2*(sdec1-&gt;kn*sdec2-&gt;kn)/(sdec1-&gt;kn+sdec2-&gt;kn);
 			contactPhysics-&gt;initialKs			= 2*(sdec1-&gt;ks*sdec2-&gt;ks)/(sdec1-&gt;ks+sdec2-&gt;ks);
@@ -61,7 +61,7 @@
 			contactPhysics-&gt;initialEquilibriumDistance	= interactionGeometry-&gt;radius1+interactionGeometry-&gt;radius2;
 		}
 		else
-			contactPhysics = dynamic_pointer_cast&lt;ElasticContactInteraction&gt;(interaction-&gt;interactionPhysics);
+			contactPhysics = YADE_PTR_CAST&lt;ElasticContactInteraction&gt;(interaction-&gt;interactionPhysics);
 		
 		contactPhysics-&gt;kn = contactPhysics-&gt;initialKn;
 		contactPhysics-&gt;ks = contactPhysics-&gt;initialKs;

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/Funnel/Funnel.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/Funnel/Funnel.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/Funnel/Funnel.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -350,8 +350,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest/SDECImpactTest.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest/SDECImpactTest.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECImpactTest/SDECImpactTest.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -557,8 +557,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor		= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry	= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume	= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry	= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume	= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 	= physics;
 	
 }

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres/SDECLinkedSpheres.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres/SDECLinkedSpheres.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECLinkedSpheres/SDECLinkedSpheres.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -180,10 +180,10 @@
 		{
 			shared_ptr&lt;Body&gt; bodyB = *bi2;
 
-			shared_ptr&lt;BodyMacroParameters&gt; a = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
-			shared_ptr&lt;BodyMacroParameters&gt; b = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
-			shared_ptr&lt;InteractingSphere&gt;	as = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
-			shared_ptr&lt;InteractingSphere&gt;	bs = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
+			shared_ptr&lt;BodyMacroParameters&gt; a = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
+			shared_ptr&lt;BodyMacroParameters&gt; b = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
+			shared_ptr&lt;InteractingSphere&gt;	as = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
+			shared_ptr&lt;InteractingSphere&gt;	bs = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
 
 			if ((a-&gt;se3.position - b-&gt;se3.position).Length() &lt; (as-&gt;radius + bs-&gt;radius))  
 			{
@@ -402,8 +402,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor		= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry	= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume	= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry	= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume	= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 	= physics;
 	
 }

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall/SDECMovingWall.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall/SDECMovingWall.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECMovingWall/SDECMovingWall.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -445,8 +445,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane/SDECSpheresPlane.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane/SDECSpheresPlane.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/SDECSpheresPlane/SDECSpheresPlane.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -407,8 +407,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest/TetrahedronsTest.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest/TetrahedronsTest.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/TetrahedronsTest/TetrahedronsTest.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -413,8 +413,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/ThreePointBending/ThreePointBending.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -247,10 +247,10 @@
 		{
 			shared_ptr&lt;Body&gt; bodyB = *bi2;
 
-			shared_ptr&lt;BodyMacroParameters&gt; a = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
-			shared_ptr&lt;BodyMacroParameters&gt; b = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
-			shared_ptr&lt;InteractingSphere&gt;	as = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
-			shared_ptr&lt;InteractingSphere&gt;	bs = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
+			shared_ptr&lt;BodyMacroParameters&gt; a = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
+			shared_ptr&lt;BodyMacroParameters&gt; b = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
+			shared_ptr&lt;InteractingSphere&gt;	as = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
+			shared_ptr&lt;InteractingSphere&gt;	bs = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
 
 			if ((a-&gt;se3.position - b-&gt;se3.position).Length() &lt; (as-&gt;radius + bs-&gt;radius))  
 			{
@@ -427,8 +427,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor		= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry	= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume	= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry	= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume	= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 	= physics;
 	
 }

Modified: trunk/yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest/TriaxialTest.cpp
===================================================================
--- trunk/yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest/TriaxialTest.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-dem/src/PreProcessor/TriaxialTest/TriaxialTest.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -707,8 +707,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor		= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry	= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume	= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry	= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume	= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 	= physics;
 	
 }

Modified: trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader/FEMSetTextLoader.cpp
===================================================================
--- trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader/FEMSetTextLoader.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMSetTextLoader/FEMSetTextLoader.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -25,7 +25,7 @@
 
 {
 	MetaBody* rootBody = YADE_CAST&lt;MetaBody*&gt;(body);
-	shared_ptr&lt;FEMSetParameters&gt; physics = dynamic_pointer_cast&lt;FEMSetParameters&gt;(par);
+	shared_ptr&lt;FEMSetParameters&gt; physics = YADE_PTR_CAST&lt;FEMSetParameters&gt;(par);
 	nodeGroupMask = physics-&gt;nodeGroupMask;
 	tetrahedronGroupMask = physics-&gt;tetrahedronGroupMask;
 

Modified: trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness/FEMTetrahedronStiffness.cpp
===================================================================
--- trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness/FEMTetrahedronStiffness.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-fem/src/Engine/EngineUnit/FEMTetrahedronStiffness/FEMTetrahedronStiffness.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -19,7 +19,7 @@
 
 {
 	MetaBody* rootBody = YADE_CAST&lt;MetaBody*&gt;(body);
-	shared_ptr&lt;FEMSetParameters&gt; physics = dynamic_pointer_cast&lt;FEMSetParameters&gt;(par);
+	shared_ptr&lt;FEMSetParameters&gt; physics = YADE_PTR_CAST&lt;FEMSetParameters&gt;(par);
 	nodeGroupMask = physics-&gt;nodeGroupMask;
 	tetrahedronGroupMask = physics-&gt;tetrahedronGroupMask;
 	

Modified: trunk/yade-packages/yade-package-fem/src/PreProcessor/FEMBeam/FEMBeam.cpp
===================================================================
--- trunk/yade-packages/yade-package-fem/src/PreProcessor/FEMBeam/FEMBeam.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-fem/src/PreProcessor/FEMBeam/FEMBeam.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -208,14 +208,14 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 
-	shared_ptr&lt;GeometricalModel&gt; gm 	= dynamic_pointer_cast&lt;GeometricalModel&gt;(ClassFactory::instance().createShared(&quot;FEMSetGeometry&quot;));
+	shared_ptr&lt;GeometricalModel&gt; gm 	= YADE_PTR_CAST&lt;GeometricalModel&gt;(ClassFactory::instance().createShared(&quot;FEMSetGeometry&quot;));
 	gm-&gt;diffuseColor 			= Vector3r(1,1,1);
 	gm-&gt;wire 				= false;
 	gm-&gt;visible 				= true;
 	gm-&gt;shadowCaster 			= true;
 	
-	rootBody-&gt;interactingGeometry 		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry 		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;geometricalModel 		= gm;
 	rootBody-&gt;physicalParameters 		= physics;
 }

Modified: trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp
===================================================================
--- trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-lattice/src/PreProcessor/LatticeExample/LatticeExample.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -1086,14 +1086,14 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor		= Vector3r(0,0,1);
 
-	shared_ptr&lt;GeometricalModel&gt; gm = dynamic_pointer_cast&lt;GeometricalModel&gt;(ClassFactory::instance().createShared(&quot;LatticeSetGeometry&quot;));
+	shared_ptr&lt;GeometricalModel&gt; gm = YADE_PTR_CAST&lt;GeometricalModel&gt;(ClassFactory::instance().createShared(&quot;LatticeSetGeometry&quot;));
 	gm-&gt;diffuseColor 		= Vector3r(1,1,1);
 	gm-&gt;wire 			= false;
 	gm-&gt;visible 			= true;
 	gm-&gt;shadowCaster 		= true;
 	
-	rootBody-&gt;interactingGeometry	= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume	= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry	= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume	= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;geometricalModel 	= gm;
 	rootBody-&gt;physicalParameters 	= physics;
 }

Modified: trunk/yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth/HangingCloth.cpp
===================================================================
--- trunk/yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth/HangingCloth.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-mass-spring/src/PreProcessor/HangingCloth/HangingCloth.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -404,10 +404,10 @@
 			{
 				shared_ptr&lt;Body&gt; bodyB = *bi2;
 	
-				shared_ptr&lt;BodyMacroParameters&gt; a = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
-				shared_ptr&lt;BodyMacroParameters&gt; b = dynamic_pointer_cast&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
-				shared_ptr&lt;InteractingSphere&gt;	as = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
-				shared_ptr&lt;InteractingSphere&gt;	bs = dynamic_pointer_cast&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
+				shared_ptr&lt;BodyMacroParameters&gt; a = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyA-&gt;physicalParameters);
+				shared_ptr&lt;BodyMacroParameters&gt; b = YADE_PTR_CAST&lt;BodyMacroParameters&gt;(bodyB-&gt;physicalParameters);
+				shared_ptr&lt;InteractingSphere&gt;	as = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyA-&gt;interactingGeometry);
+				shared_ptr&lt;InteractingSphere&gt;	bs = YADE_PTR_CAST&lt;InteractingSphere&gt;(bodyB-&gt;interactingGeometry);
 	
 				if ( a &amp;&amp; b &amp;&amp; as &amp;&amp; bs &amp;&amp; (a-&gt;se3.position - b-&gt;se3.position).Length() &lt; (as-&gt;radius + bs-&gt;radius))  
 				{

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox2InteractingSphere4ClosestFeatures/AAInteractingBox2InteractingSphere4ClosestFeatures.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox2InteractingSphere4ClosestFeatures/AAInteractingBox2InteractingSphere4ClosestFeatures.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/AAInteractingBox2InteractingSphere4ClosestFeatures/AAInteractingBox2InteractingSphere4ClosestFeatures.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -23,8 +23,8 @@
 	Vector3r pt1,pt2,normal;
 	Real depth;
 	
-	shared_ptr&lt;InteractingSphere&gt; s = dynamic_pointer_cast&lt;InteractingSphere&gt;(cm2);
-	shared_ptr&lt;InteractingBox&gt;  aaBox = dynamic_pointer_cast&lt;InteractingBox&gt;(cm1);
+	shared_ptr&lt;InteractingSphere&gt; s = YADE_PTR_CAST&lt;InteractingSphere&gt;(cm2);
+	shared_ptr&lt;InteractingBox&gt;  aaBox = YADE_PTR_CAST&lt;InteractingBox&gt;(cm1);
 	
 	p = se32.position-se31.position;
 	
@@ -111,7 +111,7 @@
 	bool isInteracting = go(cm2,cm1,se32,se31,c);
 	if (isInteracting)
 	{
-		shared_ptr&lt;ClosestFeatures&gt; cf = dynamic_pointer_cast&lt;ClosestFeatures&gt;(c-&gt;interactionGeometry);
+		shared_ptr&lt;ClosestFeatures&gt; cf = YADE_PTR_CAST&lt;ClosestFeatures&gt;(c-&gt;interactionGeometry);
 		Vector3r tmp = cf-&gt;closestsPoints[0].first;
 		cf-&gt;closestsPoints[0].first = cf-&gt;closestsPoints[0].second;		
 		cf-&gt;closestsPoints[0].second = tmp;

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ClosestFeatures/InteractingBox2InteractingSphere4ClosestFeatures.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ClosestFeatures/InteractingBox2InteractingSphere4ClosestFeatures.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ClosestFeatures/InteractingBox2InteractingSphere4ClosestFeatures.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -28,8 +28,8 @@
 	Matrix3r axisT,axis;
 	Real depth;
 
-	shared_ptr&lt;InteractingSphere&gt; s = dynamic_pointer_cast&lt;InteractingSphere&gt;(cm2);
-	shared_ptr&lt;InteractingBox&gt; obb = dynamic_pointer_cast&lt;InteractingBox&gt;(cm1);
+	shared_ptr&lt;InteractingSphere&gt; s = YADE_PTR_CAST&lt;InteractingSphere&gt;(cm2);
+	shared_ptr&lt;InteractingBox&gt; obb = YADE_PTR_CAST&lt;InteractingBox&gt;(cm1);
 	
 	Vector3r extents = obb-&gt;extents;
 
@@ -120,7 +120,7 @@
 	bool isInteracting = go(cm2,cm1,se32,se31,interaction);
 	if (isInteracting)
 	{
-		shared_ptr&lt;ClosestFeatures&gt; cf = dynamic_pointer_cast&lt;ClosestFeatures&gt;(interaction-&gt;interactionGeometry);
+		shared_ptr&lt;ClosestFeatures&gt; cf = YADE_PTR_CAST&lt;ClosestFeatures&gt;(interaction-&gt;interactionGeometry);
 		Vector3r tmp = cf-&gt;closestsPoints[0].first;
 		cf-&gt;closestsPoints[0].first = cf-&gt;closestsPoints[0].second;		
 		cf-&gt;closestsPoints[0].second = tmp;

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ErrorTolerantContact/InteractingBox2InteractingSphere4ErrorTolerantContact.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ErrorTolerantContact/InteractingBox2InteractingSphere4ErrorTolerantContact.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingBox2InteractingSphere4ErrorTolerantContact/InteractingBox2InteractingSphere4ErrorTolerantContact.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -28,8 +28,8 @@
 	Matrix3r axisT,axis;
 	float depth;
 
-	shared_ptr&lt;Sphere&gt; s = dynamic_pointer_cast&lt;Sphere&gt;(cm2);
-	shared_ptr&lt;Box&gt; obb = dynamic_pointer_cast&lt;Box&gt;(cm1);
+	shared_ptr&lt;Sphere&gt; s = YADE_PTR_CAST&lt;Sphere&gt;(cm2);
+	shared_ptr&lt;Box&gt; obb = YADE_PTR_CAST&lt;Box&gt;(cm1);
 	
 	Vector3r extents = obb-&gt;extents;
 
@@ -128,7 +128,7 @@
 	bool isInteracting = go(cm2,cm1,se32,se31,c);
 	if (isInteracting)
 	{
-		shared_ptr&lt;ErrorTolerantContact&gt; cm = dynamic_pointer_cast&lt;ErrorTolerantContact&gt;(c-&gt;interactionGeometry);
+		shared_ptr&lt;ErrorTolerantContact&gt; cm = YADE_PTR_CAST&lt;ErrorTolerantContact&gt;(c-&gt;interactionGeometry);
 
 		Vector3r tmp = cm-&gt;closestPoints[0].first;
 		cm-&gt;closestPoints[0].first = cm-&gt;closestPoints[0].second;

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ClosestFeatures/InteractingSphere2InteractingSphere4ClosestFeatures.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ClosestFeatures/InteractingSphere2InteractingSphere4ClosestFeatures.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ClosestFeatures/InteractingSphere2InteractingSphere4ClosestFeatures.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -17,8 +17,8 @@
 						const Se3r&amp; se32,
 						const shared_ptr&lt;Interaction&gt;&amp; c)
 {
-	shared_ptr&lt;InteractingSphere&gt; s1 = dynamic_pointer_cast&lt;InteractingSphere&gt;(cm1);
-	shared_ptr&lt;InteractingSphere&gt; s2 = dynamic_pointer_cast&lt;InteractingSphere&gt;(cm2);
+	shared_ptr&lt;InteractingSphere&gt; s1 = YADE_PTR_CAST&lt;InteractingSphere&gt;(cm1);
+	shared_ptr&lt;InteractingSphere&gt; s2 = YADE_PTR_CAST&lt;InteractingSphere&gt;(cm2);
 	
 	Vector3r v = se31.position-se32.position;
 	Real l = v.Normalize();

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ErrorTolerantContact/InteractingSphere2InteractingSphere4ErrorTolerantContact.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ErrorTolerantContact/InteractingSphere2InteractingSphere4ErrorTolerantContact.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/EngineUnit/InteractingSphere2InteractingSphere4ErrorTolerantContact/InteractingSphere2InteractingSphere4ErrorTolerantContact.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -17,8 +17,8 @@
 						const Se3r&amp; se32,
 						const shared_ptr&lt;Interaction&gt;&amp; c)
 {
-	shared_ptr&lt;Sphere&gt; s1 = dynamic_pointer_cast&lt;Sphere&gt;(cm1);
-	shared_ptr&lt;Sphere&gt; s2 = dynamic_pointer_cast&lt;Sphere&gt;(cm2);
+	shared_ptr&lt;Sphere&gt; s1 = YADE_PTR_CAST&lt;Sphere&gt;(cm1);
+	shared_ptr&lt;Sphere&gt; s2 = YADE_PTR_CAST&lt;Sphere&gt;(cm2);
 
 	Vector3r normal = se32.position-se31.position;
 	float penetrationDepth = s1-&gt;radius+s2-&gt;radius-normal.Normalize();

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/ErrorTolerantLaw/ErrorTolerantLaw.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/ErrorTolerantLaw/ErrorTolerantLaw.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/ErrorTolerantLaw/ErrorTolerantLaw.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -64,7 +64,7 @@
 			b = *bi;
 
 			int offset = 6*i;
-			shared_ptr&lt;RigidBodyParameters&gt; rb = dynamic_pointer_cast&lt;RigidBodyParameters&gt;(b);
+			shared_ptr&lt;RigidBodyParameters&gt; rb = YADE_PTR_CAST&lt;RigidBodyParameters&gt;(b);
 			invM(offset,offset++) = 1.0/rb-&gt;mass;
 			invM(offset,offset++) = 1.0/rb-&gt;mass;
 			invM(offset,offset++) = 1.0/rb-&gt;mass;
@@ -107,7 +107,7 @@
 			if (contact-&gt;isReal)
 			{
 
-				shared_ptr&lt;ErrorTolerantContact&gt; cm = dynamic_pointer_cast&lt;ErrorTolerantContact&gt;(contact-&gt;interactionGeometry);
+				shared_ptr&lt;ErrorTolerantContact&gt; cm = YADE_PTR_CAST&lt;ErrorTolerantContact&gt;(contact-&gt;interactionGeometry);
 	
 				id1 		= contact-&gt;getId1();
 				id2 		= contact-&gt;getId2();

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/FrictionLessElasticContactLaw/FrictionLessElasticContactLaw.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/FrictionLessElasticContactLaw/FrictionLessElasticContactLaw.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/Engine/StandAloneEngine/FrictionLessElasticContactLaw/FrictionLessElasticContactLaw.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -52,12 +52,12 @@
 			int id1 = contact-&gt;getId1();
 			int id2 = contact-&gt;getId2();
 	
-			shared_ptr&lt;RigidBodyParameters&gt; rb1 = dynamic_pointer_cast&lt;RigidBodyParameters&gt;((*bodies)[id1]-&gt;physicalParameters);
-			shared_ptr&lt;RigidBodyParameters&gt; rb2 = dynamic_pointer_cast&lt;RigidBodyParameters&gt;((*bodies)[id2]-&gt;physicalParameters);
+			shared_ptr&lt;RigidBodyParameters&gt; rb1 = YADE_PTR_CAST&lt;RigidBodyParameters&gt;((*bodies)[id1]-&gt;physicalParameters);
+			shared_ptr&lt;RigidBodyParameters&gt; rb2 = YADE_PTR_CAST&lt;RigidBodyParameters&gt;((*bodies)[id2]-&gt;physicalParameters);
 	
-			std::vector&lt;std::pair&lt;Vector3r,Vector3r&gt; &gt;::iterator cpi = (dynamic_pointer_cast&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.begin();
-			std::vector&lt;std::pair&lt;Vector3r,Vector3r&gt; &gt;::iterator cpiEnd = (dynamic_pointer_cast&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.end();
-			Real size = (dynamic_pointer_cast&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.size();
+			std::vector&lt;std::pair&lt;Vector3r,Vector3r&gt; &gt;::iterator cpi = (YADE_PTR_CAST&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.begin();
+			std::vector&lt;std::pair&lt;Vector3r,Vector3r&gt; &gt;::iterator cpiEnd = (YADE_PTR_CAST&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.end();
+			Real size = (YADE_PTR_CAST&lt;ClosestFeatures&gt;(contact-&gt;interactionGeometry))-&gt;closestsPoints.size();
 			for( ; cpi!=cpiEnd ; ++cpi)
 			{
 				Vector3r p1 = (*cpi).first;

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/BoxStack/BoxStack.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/BoxStack/BoxStack.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/BoxStack/BoxStack.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -322,8 +322,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 

Modified: trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/RotatingBox/RotatingBox.cpp
===================================================================
--- trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/RotatingBox/RotatingBox.cpp	2007-03-06 21:02:36 UTC (rev 1085)
+++ trunk/yade-packages/yade-package-realtime-rigidbody/src/PreProcessor/RotatingBox/RotatingBox.cpp	2007-03-07 08:27:48 UTC (rev 1086)
@@ -342,8 +342,8 @@
 	shared_ptr&lt;AABB&gt; aabb(new AABB);
 	aabb-&gt;diffuseColor			= Vector3r(0,0,1);
 	
-	rootBody-&gt;interactingGeometry		= dynamic_pointer_cast&lt;InteractingGeometry&gt;(set);	
-	rootBody-&gt;boundingVolume		= dynamic_pointer_cast&lt;BoundingVolume&gt;(aabb);
+	rootBody-&gt;interactingGeometry		= YADE_PTR_CAST&lt;InteractingGeometry&gt;(set);	
+	rootBody-&gt;boundingVolume		= YADE_PTR_CAST&lt;BoundingVolume&gt;(aabb);
 	rootBody-&gt;physicalParameters 		= physics;
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000050.html">[Yade-commits] r1085 - in trunk: . yade-extra/clump yade-packages/yade-package-common/src/Engine/DeusExMachina/ForceEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/GravityEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/RotationEngine yade-packages/yade-package-common/src/Engine/DeusExMachina/TranslationEngine yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogOrientationIntegrator yade-packages/yade-package-common/src/Engine/EngineUnit/LeapFrogPositionIntegrator yade-packages/yade-package-common/src/Engine/EngineUnit/MetaInteractingGeometry2AABB yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsForceLaw yade-packages/yade-package-common/src/Engine/EngineUnit/NewtonsMomentumLaw yade-packages/yade-package-common/src/Engine/MetaEngine/BoundingVolumeMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/GeometricalModelMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/InteractingGeometryMetaEngi! ne yade-packages/yade-package-common/src/Engine/MetaEngine/InteractionGeometryMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/InteractionPhysicsMetaEngine yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalActionApplier yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalActionDamper yade-packages/yade-package-common/src/Engine/MetaEngine/PhysicalParametersMetaEngine yade-packages/yade-package-common/src/Engine/StandAloneEngine/PersistentSAPCollider yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerInitializer yade-packages/yade-package-common/src/Engine/StandAloneEngine/PhysicalActionContainerReseter yade-packages/yade-package-common/src/Engine/StandAloneEngine/SAPCollider yade-packages/yade-package-dem/src/Engine/DeusExMachina/ResultantForceEngine yade-packages/yade-package-dem/src/Engine/DeusExMachina/TriaxialStressController yade-packages/yade-package-dem/src/Engine/EngineUnit/MacroMicroElast! icRelationships yade-packages/yade-package-dem/src/Engine/Engi! neUnit/S
</A></li>
	<LI>Next message: <A HREF="000052.html">[Yade-commits] r1087 - trunk/yade-doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/yade-commits">More information about the Yade-commits
mailing list</a><br>
</body></html>
